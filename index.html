<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>TWENTY ONE CAFE</title>
    <link rel="shortcut icon" href="8035b066-96f2-4126-a499-977dcf95802f.JPG" type="image/x-icon"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&amp;family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

    <link href="https://fonts.googleapis.com/css2?family=Playwrite+HU&amp;family=Tsukimi+Rounded&amp;display=swap" rel="stylesheet"/> 

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <!-- SEO Meta Tags -->
    <meta name="description" content="TWENTY ONE CAFE- Premium coffee experience with exclusive loyalty rewards"/>
    <meta property="og:title" content="TWENTY ONE CAFE- Premium Coffee Experience"/>
    <meta property="og:description" content="TWENTY ONE CAFE - Premium coffee experience with exclusive loyalty rewards"/>
    <meta property="og:image" content="https://cdn-ai.onspace.ai/onspace/project/screenshot/online/pre-site/9b1n5g.jpg"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="TWENTY ONE CAFE - Premium Coffee Experience"/>
    <meta name="twitter:description" content="TWENTY ONE CAFE- Premium coffee experience with exclusive loyalty rewards"/>
    <meta name="twitter:image" content="https://cdn-ai.onspace.ai/onspace/project/screenshot/online/pre-site/9b1n5g.jpg"/>
  <style>      
      /* Custom Tailwind Config */
      .font-playfair {
        font-family: "Playfair Display", serif;
      }
      .font-inter {
        font-family: "Inter", sans-serif;
      }

      /* Custom color palette for elegance */
      :root {
        --primary-gold: #1f201d;
        --primary-dark: #222522;
        --primary-cream: #fef8e8;
        --accent-bronze: #ffffff;
        --text-warm: #4a4a4a;
        --shadow-warm: rgba(201, 169, 110, 0.15);
        --primary-taupe: #A69177;     /* Warm taupe from second image */
        --primary-olive: #5A6B3A;     /* Rich olive green from third image */
        --secondary-dark: #1A1A1A;    /* Deeper black */
        --secondary-light: #D4C4A8;   /* Light taupe */
        --accent-green: #4A5A2F;      /* Darker olive */
      }

      /* Elegant animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes shimmer {
        0% {
          background-position: -200px 0;
        }
        100% {
          background-position: calc(200px + 100%) 0;
        }
      }

      @keyframes floatGently {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      .fade-in-up {
        animation: fadeInUp 0.8s ease-out;
      }
      .slide-in-right {
        animation: slideInRight 0.6s ease-out;
      }
      .shimmer-effect {
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        background-size: 200px 100%;
        animation: shimmer 2s infinite;
      }
      .float-gently {
        animation: floatGently 3s ease-in-out infinite;
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Premium hero video container */
      .hero-video-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 0;
      }

      .hero-video {
        position: absolute;
        top: 50%;
        left: 50%;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        transform: translate(-50%, -50%);
        z-index: 0;
        object-fit: cover;
      }

      /* Premium hero overlay */
      .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(44, 24, 16, 0) 0%,
          rgba(127, 83, 25, 0) 50%,
          rgba(44, 24, 16, 0) 100%
        );
        z-index: 1;
      }

      .hero-content {
        position: relative;
        z-index: 2;
      }

      /* Connection status indicator */
      .connection-status {
        position: fixed;
        top: 80px;
        right: 20px;
        z-index: 1000;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .connection-online {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
      }

      .connection-offline {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        color: white;
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        animation: pulse 2s infinite;
      }

      /* New order notification */
      .new-order-notification {
        position: fixed;
        top: 120px;
        right: 20px;
        z-index: 1001;
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
        padding: 12px 20px;
        border-radius: 25px;
        font-weight: bold;
        box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
        animation: floatGently 2s ease-in-out infinite;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .new-order-notification:hover {
        transform: scale(1.05);
      }

      /* Elegant popup styles */
      .popup-backdrop {
        background: rgba(254, 243, 226, 0.683);
        backdrop-filter: blur(8px);
      }

      /* Premium glass effect */
      .glass-effect {
        background: rgba(248, 246, 240, 0);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(201, 169, 110, 0);
        box-shadow: 0 20px 40px rgba(44, 24, 16, 0);
      }

      /* Elegant navbar */
      .navbar-scrolled {
        background: rgba(14, 16, 13, 0.842) !important;
        backdrop-filter: blur(20px);
        box-shadow: 0 4px 30px rgba(33, 19, 13, 0.2);
      }

      /* Premium card styling */
      .premium-card {
        background: linear-gradient(145deg, #f8f6f05a 0%, #f0ede5b5 100%);
        box-shadow: 0 10px 30px rgba(44, 24, 16, 0.1),
          0 1px 8px rgba(44, 24, 16, 0.05);
        border: 1px solid rgba(201, 169, 110, 0.15);
      }

      .premium-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(44, 24, 16, 0.15),
          0 10px 20px rgba(201, 169, 110, 0.15);
      }

      /* Loyalty card with premium styling */
      .loyalty-card {
        background: linear-gradient(
          145deg,
          #c9a96e 0%,
          #b8956a 50%,
          #a68b5b 100%
        );
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
          0 10px 30px rgba(44, 24, 16, 0.2);
      }

      .stamp-circle {
        width: 45px;
        height: 45px;
        border: 3px solid rgba(44, 24, 16, 0.8);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        background: rgba(248, 246, 240, 0.9);
        color: var(--primary-dark);
      }

      .stamp-circle.filled {
        background: var(--primary-dark);
        color: var(--primary-gold);
        transform: scale(1.15);
        box-shadow: 0 4px 15px rgba(44, 24, 16, 0.3);
      }

      /* Elegant pending orders */
      .pending-order-animation {
        animation: floatGently 2s ease-in-out infinite;
      }

      /* Premium star rating */
      .star-rating {
        direction: ltr;
        display: inline-block;
      }
      .star {
        font-size: 1.75rem;
        color: #d1d5db;
        cursor: pointer;
        transition: all 0.3s ease;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }
      .star:hover,
      .star.active {
        color: var(--primary-gold);
        transform: scale(1.1);
      }

      /* Enhanced button styles */
      .btn-primary {
        background: linear-gradient(145deg, #c9a96e 0%, #b8956a 100%);
        color: var(--primary-dark);
        font-weight: 600;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(201, 169, 110, 0.3);
      }

      .btn-primary:hover {
        background: linear-gradient(145deg, #b8956a 0%, #a68b5b 100%);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(201, 169, 110, 0.4);
      }

      .btn-secondary {
        background: linear-gradient(145deg, #2c1810 0%, #3d2419 100%);
        color: var(--primary-gold);
        border: 1px solid rgba(201, 169, 110, 0.3);
      }

      /* Elegant filter buttons */
      .filter-btn {
        background: rgba(44, 24, 16, 0.05);
        color: var(--primary-dark);
        border: 2px solid rgba(201, 169, 110, 0.3);
        font-weight: 500;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
      }

      .filter-btn:hover,
      .filter-btn.active {
        background: linear-gradient(145deg, #c9a96e 0%, #b8956a 100%);
        color: var(--primary-dark);
        border-color: var(--primary-gold);
        transform: translateY(-2px);
      }

      /* Premium menu item styling */
      .menu-item-card {
        background: linear-gradient(145deg, #ffffff 0%, #f8f6f0 100%);
        border: 1px solid rgba(201, 169, 110, 0.1);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .menu-item-card:hover {
        transform: translateY(-12px) scale(1.02);
        box-shadow: 0 25px 50px rgba(44, 24, 16, 0.15),
          0 10px 20px rgba(201, 169, 110, 0.1);
      }

      .price-badge {
        background: linear-gradient(145deg, #c9a96e 0%, #b8956a 100%);
        color: var(--primary-dark);
        font-weight: 700;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-size: 0.9rem;
        letter-spacing: 0.5px;
      }

      /* Shop Cart Styling */
      .cart-icon {
        position: relative;
        cursor: pointer;
      }

      .cart-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: linear-gradient(145deg, #dc2626 0%, #b91c1c 100%);
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);
      }

      /* Shopping Cart Modal - Fixed for Desktop Scrolling */
      @media (min-width: 768px) {
        #cart-modal .glass-effect {
          max-height: 90vh;
          overflow-y: auto;
          display: flex;
          flex-direction: column;
        }

        #cart-items-container {
          max-height: 60vh;
          overflow-y: auto;
          flex-grow: 1;
        }

        #cart-footer {
          flex-shrink: 0;
          padding-top: 1rem;
          border-top: 1px solid rgba(201, 169, 110, 0.2);
        }
      }

      /* Shopping Cart Modal */
      .cart-item {
        background: rgba(248, 246, 240, 0.8);
        border: 1px solid rgba(201, 169, 110, 0.2);
        border-radius: 1rem;
        padding: 1rem;
        margin-bottom: 0.75rem;
        transition: all 0.3s ease;
      }

      .cart-item:hover {
        background: rgba(248, 246, 240, 1);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(44, 24, 16, 0.1);
      }

      /* Quantity Controls */
      .quantity-btn {
        background: linear-gradient(145deg, #c9a96e 0%, #b8956a 100%);
        color: var(--primary-dark);
        border: none;
        width: 32px;
        height: 32px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .quantity-btn:hover {
        background: linear-gradient(145deg, #b8956a 0%, #a68b5b 100%);
        transform: scale(1.1);
      }

      /* Shop item styling */
      .shop-item-card {
        background: linear-gradient(145deg, #ffffff 0%, #f3f4f6 100%);
        border: 1px solid rgba(99, 102, 241, 0.1);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      .shop-item-card:hover {
        transform: translateY(-12px) scale(1.02);
        box-shadow: 0 25px 50px rgba(99, 102, 241, 0.15),
          0 10px 20px rgba(99, 102, 241, 0.1);
      }

      /* Shop filter buttons */
      .shop-filter-btn {
        background: rgba(99, 102, 241, 0.05);
        color: #1d1d1f;
        border: 2px solid rgba(53, 67, 41, 0.3);
        font-weight: 500;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
      }

      .shop-filter-btn:hover,
      .shop-filter-btn.active {
        background: linear-gradient(145deg, #3f552d 0%, #9c9864 100%);
        color: white;
        border-color: #53472c;
        transform: translateY(-2px);
      }

      /* Custom RTL support for Arabic */
      .rtl {
        direction: rtl;
      }
      .ltr {
        direction: ltr;
      }

      /* Responsive utilities */
      @media (max-width: 640px) {
        .mobile-menu-item {
          padding: 1rem;
          border-bottom: 1px solid rgba(201, 169, 110, 0.1);
        }

        .mobile-popup {
          margin: 0.5rem;
          max-height: 95vh;
          overflow-y: auto;
        }

        .mobile-grid-2 {
          grid-template-columns: repeat(2, 1fr);
          gap: 0.75rem;
        }

        .mobile-menu-item-small {
          padding: 0.75rem;
        }

        .mobile-menu-item-small img {
          width: 60px;
          height: 60px;
        }

        .mobile-menu-item-small h3 {
          font-size: 0.875rem;
          line-height: 1.25;
        }

        .mobile-menu-item-small p {
          font-size: 0.75rem;
          line-height: 1.25;
        }
      }

      /* Mobile Cart Item Styling */
      .cart-item {
        padding: 0.75rem;
        margin-bottom: 0.5rem;
      }

      .cart-item .flex {
        flex-direction: column;
        gap: 0.75rem;
      }

      .cart-item .flex.items-center {
        flex-direction: row;
        align-items: center;
      }

      .cart-item img {
        width: 3rem;
        height: 3rem;
      }

      /* Mobile quantity controls */
      .quantity-btn {
        width: 36px;
        height: 36px;
        font-size: 1rem;
      }

      /* Mobile buttons */
      .btn-primary,
      .btn-secondary {
        padding: 0.875rem 1.5rem;
        font-size: 0.875rem;
      }

      /* Mobile modal adjustments */
      .glass-effect {
        padding: 1.5rem;
        margin: 0.5rem;
      }

      /* Mobile hero text */
      .hero-content h1 {
        font-size: 2.5rem;
        line-height: 1.1;
      }

      .hero-content p {
        font-size: 1.125rem;
      }

      /* Extra small screens */
      @media (max-width: 480px) {
        .mobile-popup {
          margin: 0.25rem;
          max-height: 98vh;
        }

        .glass-effect {
          padding: 1rem;
        }

        .cart-item {
          padding: 0.5rem;
        }

        .cart-item img {
          width: 2.5rem;
          height: 2.5rem;
        }

        .quantity-btn {
          width: 30px;
          height: 30px;
          font-size: 0.875rem;
        }

        /* Ultra-compact cart layout */
        .cart-item .flex {
          gap: 0.5rem;
        }

        .hero-content h1 {
          font-size: 2rem;
        }

        .hero-content p {
          font-size: 1rem;
        }
      }

      /* Elegant scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }

      ::-webkit-scrollbar-track {
        background: var(--primary-cream);
      }

      ::-webkit-scrollbar-thumb {
        background: linear-gradient(145deg, #c9a96e 0%, #b8956a 100%);
        border-radius: 4px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(145deg, #b8956a 0%, #a68b5b 100%);
      }

      /* إخفاء الأختام في الموبايل (الهيدر) */
      @media (max-width: 768px) {
        #customer-stamps-display,
        #mobile-customer-stamps-display {
          display: none !important;
        }
      }
      /* اخفاء السلة اللي فوق بالهيدر */
      .navbar .cart-icon {
        display: none !important;
      }

      /* إضافة هذه الأنماط الجديدة */
      @media (max-width: 768px) {
        .navbar .cart-icon {
          display: none !important;
        }

        #customer-status {
          display: none !important;
        }
      }

      .font-playfair {
        font-family: "Playfair Display", serif;
      }
      .font-inter {
        font-family: "Inter", sans-serif;
      }

      /* إضافة أنماط جديدة للشعار */
      .logo-container {
        display: flex;
        align-items: center;
        gap: 44px;
      }

      .logo-image {
        width: 50px;
        height: 50px;
      }

      .logo-text {
        font-size: 1.5 rem;
        font-weight: 700;
        background: linear-gradient(to right, #8b4b13, #a0522d);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      @media (min-width: 640px) {
        .logo-image {
          width: 50px;
          height: 50px;
        }

        .logo-text {
          font-size: 1.8rem;
        }
      }

      @media (min-width: 768px) {
        .logo-image {
          width: 70px;
          height: 70px;
        }

        .logo-text {
          font-size: 2.2rem;
        }
      }

     /* Improved Checkout Modal for Desktop */
      @media (min-width: 768px) {
        #checkout-modal .glass-effect {
          max-width: 600px;
          width: 90%;
          max-height: 85vh;
          overflow-y: auto;
        }
        
        #checkout-summary {
          max-height: 200px;
          overflow-y: auto;
        }
        
        #checkout-items-list {
          max-height: 120px;
          overflow-y: auto;
        }
      }

      @media (min-width: 1024px) {
        #checkout-modal .glass-effect {
          max-width: 700px;
        }
        
        /* Improve form layout for larger screens */
        #checkout-form .grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 1.5rem;
        }
        
        /* Make the address field span full width */
        #checkout-form .grid + div {
          grid-column: 1 / -1;
        }
      }
  </style></head>
    
  
  <body>
    <!-- Connection Status Indicator -->
    <div id="connection-status" class="connection-status connection-offline">
      <i class="fas fa-wifi mr-2"></i>
      <span id="connection-text">Connecting...</span>
    </div>

    <!-- New Order Notification -->
    <div id="new-order-notification" class="new-order-notification hidden">
      <i class="fas fa-bell mr-2"></i>
      <span>طلب جديد وصل!</span>
    </div>

    <!-- Navigation Bar -->
    <nav id="navbar" class="fixed top-0 left-0 right-0 z-10 bg-[#120905]/60 backdrop-blur-md transition-all duration-500">
      <div class="max-w-7xl mx-auto px-4 py-2 sm:px-6 sm:py-4">
        <div class="flex justify-between items-center">
          <!-- Logo -->
          <div class="logo-container flex items-center gap-3">
           <a href="#home"> <img src="/image/3-logo-2.png" alt="Logo" class="logo-image w-10 h-10 sm:w-14 sm:h-14"/></a>
            <h3 class="logo-text font-playfair text-[1.2rem] sm:text-[1.2rem]" style="color: #ebe6cc;">
              TWENTY ONE
            </h3>
          </div>

          <!-- Mobile Menu Button -->
          <button id="mobile-menu-btn" class="md:hidden flex flex-col gap-1.5 w-6 h-5 relative group">
            <span class="w-full h-0.5 bg-[#dbceb0] transition-all duration-300 group-hover:"></span>
            <span class="w-full h-0.5 bg-[#dbceb0] transition-all duration-300 group-hover:"></span>
            <span class="w-full h-0.5 bg-[#dbceb0] transition-all duration-300 group-hover:"></span>
          </button>

          <!-- Desktop Navigation -->
          <ul class="hidden md:flex gap-8 lg:gap-12 items-center">
            <li>
              <a href="#home" class=" hover:text-amber-600 transition-all" style="color: #dbceb0;">Home</a>
            </li>
            <li>
              <a href="#menu" class=" hover:text-amber-600 transition-all" style="color: #dbceb0;">Menu</a>
            </li>
            <li>
              <a href="#shop" class=" hover:text-amber-600 transition-all" style="color: #dbceb0;">Shop</a>
            </li>
            <li>
              <a href="#contact" class=" hover:text-amber-600 transition-all" style="color: #dbceb0;">Contact</a>
            </li>
            <li>
              <button id="customer-login-btn" class="text-amber-800 hover:text-amber-600 transition-all" style="color: #dbceb0;">
               Account
              </button>
            </li>
            <li>
              <button id="barista-access-btn" class="text-amber-800 hover:text-amber-600 transition-all" style="color: #dbceb0;">
                barista
              </button>
            </li>
          </ul>

          <!-- Customer Status Display (ديسكتوب فقط) -->
          <div id="customer-status" class="hidden md:flex items-center gap-4">
            <span id="customer-name-display" class="text-amber-800 font-semibold cursor-pointer hover:text-amber-600"></span>

            <!-- الأختام تظهر هنا في الديسكتوب -->
            <div id="customer-stamps-display" class="flex gap-1.5"></div>

            <!-- Shopping Cart Icon -->
            <div class="cart-icon" onclick="toggleCart()">
              <i class="fas fa-shopping-cart  hover:text-amber-600 text-xl" style="color: #dbceb0;"></i>
              <span id="cart-badge" class="cart-badge hidden">0</span>
            </div>

            <button id="logout-customer-btn" class="text-amber-600 hover:text-amber-800 p-2">
            </button>
          </div>
        </div>

        <!-- Mobile Navigation -->
        <ul id="mobile-menu" class="md:hidden overflow-hidden max-h-0 transition-all duration-500 mt-6 bg-white/95 backdrop-blur-md rounded-2xl" style="color: #000000;">
          <li class="mobile-menu-item">
            <a href="#home" class="block hover:text-amber-600">Home</a>
          </li>
          <li class="mobile-menu-item">
            <a href="#menu" class="block hover:text-amber-600">Menu</a>
          </li>
          <li class="mobile-menu-item">
            <a href="#shop" class="block hover:text-amber-600">Shope</a>
          </li>
          <li class="mobile-menu-item">
            <a href="#contact" class="block hover:text-amber-600">Contact</a>
          </li>

          <!-- Shopping Cart كعنصر مستقل -->
          <li class="mobile-menu-item">
            <div class="cart-icon flex items-center cursor-pointer hover:text-amber-600" onclick="toggleCart()">
              <i class="fas fa-shopping-cart text-amber-800 text-xl mr-3" style="color: #000000;"></i>
              <span id="mobile-cart-badge" class="cart-badge ml-2">0</span>
            </div>
          </li>

          <li class="mobile-menu-item">
            <button id="mobile-customer-login-btn" class="block w-full text-left hover:text-amber-600">
              Account
            </button>
          </li>

          <!-- دخول الموظفين -->
          <li class="mobile-menu-item">
            <button id="mobile-barista-access-btn" class="text-left hover:text-amber-600">
              barista
            </button>
          </li>

          <!-- Customer Status داخل المنيو فقط -->
          <li id="mobile-customer-status" class="mobile-menu-item hidden">
            <div class="flex flex-col gap-3 p-2">
              <!-- اسم العميل -->
              <span id="mobile-customer-name-display" class="text-amber-800 font-semibold cursor-pointer hover:text-amber-600"></span>

              <!-- الأختام -->
              <div id="mobile-customer-stamps-display" class="flex gap-1.5"></div>

              <!-- تسجيل الخروج -->
            </div>
            <button id="mobile-logout-customer-btn" class="text-left text-amber-600 hover:text-amber-800">
              <i class="fas fa-sign-out-alt mr-2"></i>Logout
            </button>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Hero Section with Video Background -->
    <header id="home" class="relative min-h-screen overflow-hidden flex items-center justify-center text-white">
      <!-- Video Background Container -->
      <div class="hero-video-container">
        <video id="hero-video" class="hero-video" autoplay="" muted="" loop="" playsinline="" preload="auto" poster="">
          <source src="/image/c1.mp4" type="video/mp4"/>
        </video>
      </div>

      <div class="hero-content relative  max-w-6xl mx-auto px-6 text-center">
        <div class="fade-in-up">
        <h1 class="text-4xl sm:text-5xl md:text-7xl font-bold mb-8 leading-tight" style="font-family: &#39;Tsukimi Rounded&#39;, sans-serif;">
            WELCOM  21  CAFE
            <span class="bg-gradient-to-r from-amber-300 to-amber-100 bg-clip-text text-transparent" style="color: #0e0400;">
            </span>
          </h1>
         <h6>
          <p class="text-xl sm:text-2xl md:text-3xl mb-4 text-amber-100 font-light leading-relaxed" style="color: #281000; font-weight:bolder ;">
          WHERE FRIENDS AND FLAVOR COME TOGETHER
          </p>
        </h6> 
          <div class="flex flex-col sm:flex-row gap-6 justify-center items-center">
            <a href="#menu" class="btn-primary px-10 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-2xl">
              Explore Our Menu
            </a>
            <button id="hero-loyalty-btn" class="bg-white/20 backdrop-blur-md border-2 border-white/30 text-white px-10 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 hover:bg-white/30">
              <i class="fas fa-star mr-2"></i>
              Join Elite Rewards
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Menu Section -->
    <main id="menu" class="py-24 bg-gradient-to-br from-stone-50 via-amber-50 to-orange-50">
      <div class="max-w-7xl mx-auto px-6">
        <!-- Menu Header -->
        <div class="text-center mb-16 fade-in-up">
          <h2 class="text-5xl sm:text-6xl font-playfair font-bold text-amber-900 mb-6">
            Our Signature Collection
          </h2>
          <p class="text-2xl text-amber-700 mb-4 font-light">
            Artisanal Craftsmanship in Every Cup
          </p>
          <div class="w-24 h-1 bg-gradient-to-r from-amber-600 to-amber-800 mx-auto mb-12 rounded-full"></div>

          <!-- Filter Buttons -->
          <div class="max-w-4xl mx-auto">
            <!-- All Button - Centered at Top -->
            <div class="flex justify-center mb-6">
              <button class="filter-btn active px-6 sm:px-8 md:px-10 py-3 sm:py-4 rounded-full transition-all duration-300 text-base sm:text-lg md:text-xl font-semibold shadow-lg" data-category="all">
                All Selections
              </button>
            </div>

            <!-- Other Filter Buttons - Grid Layout -->
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 sm:gap-4">
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="HOT COFFEE">
                HOT COFFEE
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="ICED COFFEE">
                ICED COFFEE
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="HOT CHOCOLATE">
                HOT CHOCOLATE
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="SIGNATURES">
                SIGNATURES
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="ICE DRINKS">
                ICE DRINKS
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="ICED BLEND">
                ICED BLEND
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="SPECIALITY">
                SPECIALITY
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="AGED COFFEE">
                AGED COFFEE
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="YOGURT">
                YOGURT
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="SMOOTHE">
                SMOOTHE
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="ADD-ONS">
                ADD-ONS
              </button>
              <button class="filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-category="PASTRIES">
                PASTRIES
              </button>
            </div>
          </div>
        </div>

        <!-- Menu Items Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10">
          <!-- Coffee Items -->
          <div class="menu-item fade-in-up" data-category="HOT CHOCOLATE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;ORIGINAL HOT CHOCOLATE&#34;,&#34;price&#34;:&#34;4000&#34;,
            &#34;image&#34;:&#34;/image/40.jpg &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:4000}">
              <div class="relative mb-6">
                <img src="/image/40.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  4000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                ORIGINAL HOT CHOCOLATE
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

          <div class="menu-item fade-in-up" data-category="HOT CHOCOLATE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;hot choocolate cinnamon&#34;,&#34;price&#34;:&#34;5000&#34;,
            &#34;image&#34;:&#34;/image/hot choocolate cinnamon.jpg &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:5000}">
              <div class="relative mb-6">
                <img src="/image/hot choocolate cinnamon.jpg" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  5000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                hot choocolate cinnamon
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

          <div class="menu-item fade-in-up" data-category="HOT CHOCOLATE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;SNOWFLAKE HOT CHOCOLATE&#34;,&#34;price&#34;:&#34;4500&#34;,
            &#34;image&#34;:&#34;/image/20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:4500}">
              <div class="relative mb-6">
                <img src="/image/20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  4500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                SNOWFLAKE HOT CHOCOLATE
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

          <div class="menu-item fade-in-up" data-category="HOT CHOCOLATE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;Artisan Latte&#34;,&#34;price&#34;:&#34;5000&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:5000}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  5000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                MARSHMALLOW HOT CHOCOLATE
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>
<!-- HOT COFFEE -->
          <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;ESPRESSO&#34;,&#34;price&#34;:&#34;2500&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:2500}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                 2500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                ESPRESSO
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

          <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;DOUBLEE ESPRESSO&#34;,&#34;price&#34;:&#34;3500&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:3500}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  3500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                DOUBLEE ESPRESSO
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

          <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;TURKISH&#34;,&#34;price&#34;:&#34;2500&#34;,
            &#34;image&#34;:&#34;/image/hot-coffee-turkish-.jpg &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:2500}">
              <div class="relative mb-6">
                <img src="/image/hot-coffee-turkish-.jpg" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  2500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                TURKISH
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>
            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;CARAMEL MACCHIATO&#34;,&#34;price&#34;:&#34;5000&#34;,
            &#34;image&#34;:&#34;/image/hot coffee latte.jpg &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:5000}">
              <div class="relative mb-6">
                <img src="/image/hot coffee latte.jpg" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  5500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                CARAMEL MACCHIATO
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;CORTADO&#34;,&#34;price&#34;:&#34;4000&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:4000}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  4000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
               CORTADO
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>


            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;AMERICANO&#34;,&#34;price&#34;:&#34;4000&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:4000}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  4000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                AMERICANO
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;FALT WHITE&#34;,&#34;price&#34;:&#34;4000&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:4000}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  4000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                FALT WHITE
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>


            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;LATTE&#34;,&#34;price&#34;:&#34;4500&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:4500}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  4500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                LATTE
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34; CAPPUCINO&#34;,&#34;price&#34;:&#34;4500&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:4500}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  4500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                CAPPUCINO
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;SPANISH LATTE&#34;,&#34;price&#34;:&#34;5000&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:5000}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  5000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
               SPANISH LATTE
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;WHITE MOCHA&#34;,&#34;price&#34;:&#34;5500&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:5500}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  5500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                WHITE MOCHA
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>


            <div class="menu-item fade-in-up" data-category="HOT COFFEE">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" data-product="{&#34;name&#34;:&#34;ADARK MOCHA&#34;,&#34;price&#34;:&#34;5500&#34;,
            &#34;image&#34;:&#34;20.JPG &#34;,  &#34;description&#34;:&#34;Velvety steamed milk artfully combined with our premium espresso, creating a harmonious blend of comfort and sophistication.&#34;,&#34;priceNum&#34;:5500}">
              <div class="relative mb-6">
                <img src="20.JPG" alt="Artisan Latte" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  5500 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                DARK MOCHA
              </h3>
              <p class="text-amber-700 leading-relaxed">
                Velvety steamed milk artfully combined with premium espresso for
                perfect harmony.
              </p>
            </div>
          </div>

          <!-- More menu items would go here... -->
          
        </div>
      </div>
    </main>

    <!-- Shop Section -->
    <section id="shop" class="py-24 bg-gradient-to-br from-amber-100 via-orange-100 to-stone-100">
      <div class="max-w-7xl mx-auto px-6">
        <!-- Shop Header -->
        <div class="text-center mb-16 fade-in-up">
          <h2 class="text-5xl sm:text-6xl font-playfair font-bold text-amber-900 mb-6">
            Coffee Shop
          </h2>
          <p class="text-2xl text-amber-700 mb-4 font-light">
            Premium Products for Home &amp; Office
          </p>
          <div class="w-24 h-1 bg-gradient-to-r from-amber-600 to-amber-800 mx-auto mb-12 rounded-full"></div>

          <!-- Shop Filter Buttons -->
          <div class="max-w-4xl mx-auto">
            <div class="flex justify-center mb-6">
              <button class="shop-filter-btn active px-6 sm:px-8 md:px-10 py-3 sm:py-4 rounded-full transition-all duration-300 text-base sm:text-lg md:text-xl font-semibold shadow-lg" data-shop-category="all">
                All Products
              </button>
            </div>

            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 sm:gap-4">
              <button class="shop-filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-shop-category="beans">
                Coffee Beans
              </button>
              <button class="shop-filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-shop-category="equipment">
                Equipment
              </button>
              <button class="shop-filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-shop-category="merchandise">
                Merchandise
              </button>
              <button class="shop-filter-btn px-4 sm:px-6 py-2 sm:py-3 rounded-full transition-all duration-300 text-sm sm:text-base" data-shop-category="gift">
                Gift Sets
              </button>
            </div>
          </div>
        </div>

        <!-- Shop Items Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10">
          <!-- Coffee Beans -->
          <div class="shop-item fade-in-up" data-shop-category="equipment">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" onclick="addToCart(&#39;French Press Elegance&#39;, 45000, &#39;/image/55.jpg&#39;)">
              <div class="relative mb-6">
                <img src="/image/55.jpg" alt="French Press Elegance" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  45,000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                French Press Elegance
              </h3>
              <p class="text-amber-700 leading-relaxed mb-4">
                Premium glass French press with stainless steel filter. Perfect
                for rich, full-bodied coffee.
              </p>
              <button class="w-full btn-primary py-3 px-6 rounded-2xl text-lg font-semibold transition-all duration-300 transform hover:scale-[1.02]">
                <i class="fas fa-shopping-cart mr-2"></i>
                Add to Cart
              </button>
            </div>
          </div>

          <div class="shop-item fade-in-up" data-shop-category="merchandise">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" onclick="addToCart(&#39;Coffee Mug Set&#39;, 25000, &#39;/image/21 iced tea.jpg&#39;)">
              <div class="relative mb-6">
                <img src="/image/21 iced tea.jpg" alt="Coffee Mug Set" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  25,000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                Coffee Mug Set
              </h3>
              <p class="text-amber-700 leading-relaxed mb-4">
                Premium ceramic mug set with elegant design. Perfect for your daily coffee ritual.
              </p>
              <button class="w-full btn-primary py-3 px-6 rounded-2xl text-lg font-semibold transition-all duration-300 transform hover:scale-[1.02]">
                <i class="fas fa-shopping-cart mr-2"></i>
                Add to Cart
              </button>
            </div>
          </div>

          <div class="shop-item fade-in-up" data-shop-category="beans">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" onclick="addToCart(&#39;Premium Coffee Beans&#39;, 35000, &#39;/image/55.jpg&#39;)">
              <div class="relative mb-6">
                <img src="/image/55.jpg" alt="Premium Coffee Beans" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  35,000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                Premium Coffee Beans
              </h3>
              <p class="text-amber-700 leading-relaxed mb-4">
                Freshly roasted premium coffee beans with rich flavor and aroma.
              </p>
              <button class="w-full btn-primary py-3 px-6 rounded-2xl text-lg font-semibold transition-all duration-300 transform hover:scale-[1.02]">
                <i class="fas fa-shopping-cart mr-2"></i>
                Add to Cart
              </button>
            </div>
          </div>

          <div class="shop-item fade-in-up" data-shop-category="gift">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" onclick="addToCart(&#39;Coffee Lover Gift Set&#39;, 75000, &#39;/image/55.jpg&#39;)">
              <div class="relative mb-6">
                <img src="/image/55.jpg" alt="Coffee Lover Gift Set" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  75,000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                Coffee Lover Gift Set
              </h3>
              <p class="text-amber-700 leading-relaxed mb-4">
                Complete gift set with premium beans, elegant mug, and brewing accessories.
              </p>
              <button class="w-full btn-primary py-3 px-6 rounded-2xl text-lg font-semibold transition-all duration-300 transform hover:scale-[1.02]">
                <i class="fas fa-shopping-cart mr-2"></i>
                Add to Cart
              </button>
            </div>
          </div>

          <div class="shop-item fade-in-up" data-shop-category="equipment">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" onclick="addToCart(&#39;Espresso Machine&#39;, 150000, &#39;/image/55.jpg&#39;)">
              <div class="relative mb-6">
                <img src="/image/55.jpg" alt="Espresso Machine" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  150,000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                Espresso Machine
              </h3>
              <p class="text-amber-700 leading-relaxed mb-4">
                Professional-grade espresso machine for the ultimate coffee experience at home.
              </p>
              <button class="w-full btn-primary py-3 px-6 rounded-2xl text-lg font-semibold transition-all duration-300 transform hover:scale-[1.02]">
                <i class="fas fa-shopping-cart mr-2"></i>
                Add to Cart
              </button>
            </div>
          </div>

          <div class="shop-item fade-in-up" data-shop-category="merchandise">
            <div class="menu-item-card rounded-3xl p-6 shadow-lg cursor-pointer transition-all duration-500" onclick="addToCart(&#39;Cafe T-Shirt&#39;, 20000, &#39;/image/21 iced tea.jpg&#39;)">
              <div class="relative mb-6">
                <img src="/image/21 iced tea.jpg" alt="Cafe T-Shirt" class="w-full h-48 rounded-2xl object-cover shadow-md" loading="lazy"/>
                <div class="absolute top-4 right-4 price-badge shadow-lg">
                  20,000 IQD
                </div>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-900 mb-3">
                Cafe T-Shirt
              </h3>
              <p class="text-amber-700 leading-relaxed mb-4">
                Premium quality t-shirt with our exclusive cafe logo design.
              </p>
              <button class="w-full btn-primary py-3 px-6 rounded-2xl text-lg font-semibold transition-all duration-300 transform hover:scale-[1.02]">
                <i class="fas fa-shopping-cart mr-2"></i>
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Shopping Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 popup-backdrop hidden items-center justify-center z-50 p-3 sm:p-6">
      <div class="glass-effect rounded-3xl p-4 sm:p-8 max-w-2xl w-full max-h-95vh overflow-y-auto shadow-2xl mobile-popup">
        <div class="text-center mb-6 sm:mb-8">
          <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-amber-600 to-amber-800 rounded-2xl mx-auto mb-4 sm:mb-6 flex items-center justify-center shadow-lg">
            <i class="fas fa-shopping-cart text-white text-2xl sm:text-3xl"></i>
          </div>
          <h2 class="text-2xl sm:text-3xl font-playfair font-bold text-amber-900 mb-2">
            Shopping Cart
          </h2>
          <p class="text-amber-700 text-sm sm:text-base">
            Review your items before checkout
          </p>
        </div>

        <div id="cart-items-container" class="mb-6 sm:mb-8">
          <!-- Cart items will be rendered here -->
        </div>

        <div id="cart-total" class="text-center mb-6 sm:mb-8">
          <div class="text-xl sm:text-2xl font-playfair font-bold text-amber-900">
            Total: <span id="cart-total-amount">0</span> IQD
          </div>
        </div>

        <div class="flex flex-col gap-3 sm:gap-4">
          <button id="checkout-btn" class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-2xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg text-sm sm:text-base">
            <i class="fas fa-credit-card mr-2"></i>
            Proceed to Checkout
          </button>
          <button id="cart-modal-close" class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-2xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg text-sm sm:text-base">
            Continue Shopping
          </button>
        </div>
      </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="fixed inset-0 popup-backdrop hidden items-center justify-center z-50 p-6">
      <div class="glass-effect rounded-3xl p-8 max-w-2xl w-full max-h-90vh overflow-y-auto shadow-2xl mobile-popup">
        <div class="text-center mb-8">
          <div class="w-20 h-20 bg-gradient-to-br from-green-600 to-green-800 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg">
            <i class="fas fa-credit-card text-white text-3xl"></i>
          </div>
          <h2 class="text-3xl font-playfair font-bold text-amber-900 mb-2">
            Checkout
          </h2>
          <p class="text-amber-700">
            Please fill in your details to complete the purchase
          </p>
        </div>

        <form id="checkout-form" class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label for="checkout-name" class="block text-lg font-semibold text-amber-900 mb-2">Full Name *</label>
              <input type="text" id="checkout-name" required="" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none text-lg bg-white/80 backdrop-blur-sm transition-all duration-300"/>
            </div>
            <div>
              <label for="checkout-phone" class="block text-lg font-semibold text-amber-900 mb-2">Phone Number *</label>
              <input type="tel" id="checkout-phone" required="" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none text-lg bg-white/80 backdrop-blur-sm transition-all duration-300"/>
            </div>
          </div>

          <div>
            <label for="checkout-address" class="block text-lg font-semibold text-amber-900 mb-2">Delivery Address *</label>
            <textarea id="checkout-address" rows="3" required="" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none resize-none text-lg bg-white/80 backdrop-blur-sm transition-all duration-300"></textarea>
          </div>

          <div>
            <label for="checkout-notes" class="block text-lg font-semibold text-amber-900 mb-2">Additional Notes</label>
            <textarea id="checkout-notes" rows="2" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none resize-none text-lg bg-white/80 backdrop-blur-sm transition-all duration-300" placeholder="Any special instructions..."></textarea>
          </div>

          <div id="checkout-summary" class="bg-amber-50 p-6 rounded-2xl border border-amber-200">
            <h3 class="text-xl font-semibold text-amber-900 mb-4">
              Order Summary
            </h3>
            <div id="checkout-items-list" class="space-y-2 mb-4">
              <!-- Order items will be listed here -->
            </div>
            <div class="border-t border-amber-300 pt-4">
              <div class="flex justify-between items-center text-xl font-bold text-amber-900">
                <span>Total:</span>
                <span id="checkout-total-amount">0 IQD</span>
              </div>
            </div>
          </div>

          <div class="flex flex-col sm:flex-row gap-4">
            <button type="submit" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg">
              <i class="fas fa-check mr-2"></i>
              Confirm Purchase
            </button>
            <button type="button" id="checkout-modal-close" class="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Customer Login/Register Modal -->
    <div id="customer-modal" class="fixed inset-0 popup-backdrop hidden items-center justify-center z-50 p-6">
      <div class="glass-effect rounded-3xl p-8 max-w-md w-full shadow-2xl mobile-popup">
        <div class="text-center mb-8">
          <div class="w-20 h-20 bg-gradient-to-br from-amber-600 to-amber-800 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg">
            <i class="fas fa-user text-white text-3xl"></i>
          </div>
          <h2 id="customer-modal-title" class="text-3xl font-playfair font-bold text-amber-900 mb-2">
            Welcome Back
          </h2>
          <p class="text-amber-700">Access your exclusive rewards</p>
        </div>

        <div id="customer-login-form">
          <input type="text" id="customer-identifier" placeholder="Enter your name or phone number" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none mb-6 text-lg bg-white/80 backdrop-blur-sm transition-all duration-300"/>
          <button id="customer-login-submit" class="w-full btn-primary py-4 px-8 rounded-2xl text-lg font-semibold transition-all duration-300 transform hover:scale-[1.02]">
            Access My Account
          </button>
        </div>

        <button id="customer-modal-close" class="absolute top-6 right-6 text-3xl font-bold text-amber-600 hover:text-amber-800 transition-colors duration-300">
          ×
        </button>
      </div>
    </div>

    <!-- Product Details Modal -->
    <div id="product-modal" class="fixed inset-0 popup-backdrop hidden items-center justify-center z-50 p-6">
      <div class="glass-effect rounded-3xl p-8 max-w-2xl w-full shadow-2xl mobile-popup">
        <div class="text-center mb-8">
          <img id="product-modal-image" src="" alt="" class="w-full h-64 sm:h-80 object-cover rounded-2xl mb-6 shadow-lg"/>
          <h2 id="product-modal-title" class="text-3xl font-playfair font-bold text-amber-900 mb-4"></h2>
          <div id="product-modal-price" class="price-badge mb-6 inline-block"></div>
          <p id="product-modal-description" class="text-lg text-amber-700 leading-relaxed mb-8"></p>
        </div>

        <div class="flex flex-col sm:flex-row gap-4">
          <button id="order-now-btn" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg">
            <i class="fas fa-shopping-bag mr-2"></i>
            Order Now
          </button>
          <button id="product-modal-close" class="flex-1 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg">
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Barista Login Modal -->
    <div id="barista-modal" class="fixed inset-0 popup-backdrop hidden items-center justify-center z-50 p-6">
      <div class="glass-effect rounded-3xl p-8 max-w-md w-full shadow-2xl mobile-popup">
        <div class="text-center mb-8">
          <div class="w-20 h-20 bg-gradient-to-br from-emerald-600 to-emerald-800 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg">
            <i class="fas fa-lock text-white text-3xl"></i>
          </div>
          <h2 class="text-3xl font-playfair font-bold text-amber-900 mb-2">
            Staff Access
          </h2>
          <p class="text-amber-700">Enter your secure PIN to continue</p>
        </div>

        <input type="password" id="barista-pin" placeholder="Enter PIN" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-emerald-500 focus:outline-none text-center text-2xl mb-4 bg-white/80 backdrop-blur-sm tracking-widest"/>
        <p id="barista-error" class="text-red-600 text-center mb-6 font-semibold hidden">
          <i class="fas fa-exclamation-triangle mr-2"></i>
          Invalid PIN - Please try again
        </p>
        <button id="barista-login-submit" class="w-full bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white font-bold py-4 px-8 rounded-2xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg">
          Access Dashboard
        </button>

        <button id="barista-modal-close" class="absolute top-6 right-6 text-3xl font-bold text-amber-600 hover:text-amber-800 transition-colors duration-300">
          ×
        </button>
      </div>
    </div>

    <!-- Customer Dashboard Modal -->
    <div id="customer-dashboard" class="fixed inset-0 popup-backdrop hidden items-center justify-center z-50 p-6">
      <div class="glass-effect rounded-3xl p-8 max-w-2xl w-full max-h-90vh overflow-y-auto shadow-2xl mobile-popup">
        <div class="text-center mb-8">
          <div class="w-20 h-20 bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg">
            <i class="fas fa-crown text-white text-3xl"></i>
          </div>
          <h2 class="text-3xl font-playfair font-bold text-amber-900 mb-2">
            Elite Rewards
          </h2>
          <p id="dashboard-customer-name" class="text-xl text-amber-700 font-semibold"></p>
        </div>

        <!-- Loyalty Progress -->
        <div class="loyalty-card p-8 rounded-3xl mb-8 shadow-lg">
          <div class="flex justify-between items-center mb-6">
            <span class="text-amber-900 font-bold text-lg">Loyalty Progress</span>
            <span id="dashboard-loyalty-counter" class="text-amber-900 font-bold text-lg"></span>
          </div>
          <div class="grid grid-cols-3 sm:grid-cols-6 gap-3 mb-6" id="dashboard-stamps-grid">
            <!-- Stamps will be rendered here -->
          </div>
          <div class="w-full bg-amber-900/30 rounded-full h-4 mb-4">
            <div id="dashboard-loyalty-progress" class="bg-amber-900 h-4 rounded-full transition-all duration-700 shadow-inner"></div>
          </div>
          <p class="text-amber-900 text-sm font-medium text-center">
            Collect 6 stamps for a complimentary premium beverage ☕
          </p>
        </div>

        <!-- Order History -->
        <div class="bg-white/60 backdrop-blur-sm p-6 rounded-2xl border border-amber-200">
          <h3 class="font-bold text-amber-900 mb-4 text-xl">Recent Orders</h3>
          <div id="dashboard-order-history" class="space-y-3 max-h-64 overflow-y-auto">
            <!-- Order history will be rendered here -->
          </div>
        </div>

        <button id="customer-dashboard-close" class="absolute top-6 right-6 text-3xl font-bold text-amber-600 hover:text-amber-800 transition-colors duration-300">
          ×
        </button>
      </div>
    </div>

    <!-- Contact Section -->
    <section id="contact" class="py-24 bg-gradient-to-br from-amber-100 via-orange-100 to-stone-100">
      <div class="max-w-4xl mx-auto px-6">
        <div class="text-center mb-16 fade-in-up">
          <h2 class="text-5xl font-playfair font-bold text-amber-900 mb-6">
            Share Your Experience
          </h2>
          <p class="text-xl text-amber-700 font-light">
            We value your thoughts and feedback
          </p>
          <div class="w-24 h-1 bg-gradient-to-r from-amber-600 to-amber-800 mx-auto mt-6 rounded-full"></div>
        </div>

        <div class="premium-card rounded-3xl shadow-xl p-8 lg:p-12">
          <form id="contact-form" class="space-y-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div>
                <label for="contact-name" class="block text-lg font-semibold text-amber-900 mb-3">Full Name</label>
                <input type="text" name="name" id="contact-name" required="" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none text-lg bg-white/80 backdrop-blur-sm transition-all duration-300"/>
              </div>
              <div>
                <label for="contact-email" class="block text-lg font-semibold text-amber-900 mb-3">Email Address</label>
                <input type="email" name="email" id="contact-email" required="" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none text-lg bg-white/80 backdrop-blur-sm transition-all duration-300"/>
              </div>
            </div>

            <div>
              <label class="block text-lg font-semibold text-amber-900 mb-4">Rate Your Experience</label>
              <div class="star-rating flex justify-center gap-2 mb-6">
                <span class="star text-3xl cursor-pointer" data-rating="1">★</span>
                <span class="star text-3xl cursor-pointer" data-rating="2">★</span>
                <span class="star text-3xl cursor-pointer" data-rating="3">★</span>
                <span class="star text-3xl cursor-pointer" data-rating="4">★</span>
                <span class="star text-3xl cursor-pointer" data-rating="5">★</span>
              </div>
              <input type="hidden" name="rating" id="contact-rating" required=""/>
            </div>

            <div>
              <label for="contact-message" class="block text-lg font-semibold text-amber-900 mb-3">Your Message</label>
              <textarea name="message" id="contact-message" rows="6" required="" class="w-full p-4 border-2 border-amber-200 rounded-2xl focus:border-amber-500 focus:outline-none resize-none text-lg bg-white/80 backdrop-blur-sm transition-all duration-300"></textarea>
            </div>

            <button type="submit" id="contact-submit-btn" class="w-full btn-primary py-4 px-8 rounded-2xl text-xl font-semibold transition-all duration-300 transform hover:scale-[1.02] shadow-lg">
              <i class="fas fa-paper-plane mr-3"></i> Send 
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- Barista Dashboard -->
    <div id="barista-dashboard" class="fixed inset-0 bg-gradient-to-br from-emerald-900 via-emerald-800 to-emerald-900 text-white z-50 hidden overflow-y-auto">
      <div class="rtl font-inter">
        <!-- Barista Header -->
        <header class="bg-gradient-to-r from-emerald-800 to-emerald-900 shadow-2xl border-b border-emerald-700">
          <nav class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
              <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-gradient-to-br from-emerald-600 to-emerald-800 rounded-xl flex items-center justify-center">
                  <i class="fas fa-coffee text-white text-xl"></i>
                </div>
                <div>
                  <h1 class="text-2xl font-playfair font-bold text-white">
                    نظام الإدارة المتقدم
                  </h1>
                  <p class="text-emerald-200 text-sm">
                    TWENTY ONE CAFE Management
                  </p>
                </div>
              </div>
              <button id="barista-logout-btn" class="bg-emerald-700 hover:bg-emerald-600 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg">
                تسجيل خروج
              </button>
            </div>
          </nav>
        </header>

        <main class="max-w-7xl mx-auto py-8 px-6 lg:px-8">
          <!-- Pending Orders Section -->
          <div id="pending-orders-section" class="bg-gradient-to-r from-red-800 to-red-900 rounded-3xl shadow-2xl p-8 mb-8 hidden border border-red-700">
            <h2 class="text-3xl font-playfair font-bold text-white mb-8 flex items-center">
              <i class="fas fa-clock ml-4 text-red-300 pending-order-animation"></i>
              الطلبات المعلقة (الطلب المباشر من المنيو)
            </h2>
            <div id="pending-orders-container" class="space-y-6">
              <!-- Pending orders will be rendered here -->
            </div>
          </div>

          <!-- Shop Orders Section -->
          <div id="shop-orders-section" class="bg-gradient-to-r from-blue-800 to-blue-900 rounded-3xl shadow-2xl p-8 mb-8 hidden border border-blue-700">
            <h2 class="text-3xl font-playfair font-bold text-white mb-8 flex items-center">
              <i class="fas fa-shopping-bag ml-4 text-blue-300 pending-order-animation"></i>
              طلبات المتجر (قابلة للشراء)
            </h2>
            <div id="shop-orders-container" class="space-y-6">
              <!-- Shop orders will be rendered here -->
            </div>
          </div>

          <!-- Customer Management Section -->
          <div class="bg-gradient-to-r from-emerald-800 to-emerald-900 rounded-3xl shadow-2xl p-8 mb-8 border border-emerald-700">
            <h2 class="text-3xl font-playfair font-bold text-white mb-8 flex items-center">
              <i class="fas fa-users ml-4 text-emerald-300"></i>
              إدارة العملاء المتقدمة
            </h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div class="space-y-6">
                <h3 class="text-xl font-semibold text-emerald-200">
                  البحث عن عميل
                </h3>
                <div class="flex gap-3">
                  <input type="text" id="search-customer" placeholder="اسم العميل أو رقم الهاتف" class="flex-1 p-4 border-2 border-emerald-600 rounded-2xl focus:border-emerald-400 focus:outline-none bg-emerald-800/50 text-white text-lg backdrop-blur-sm"/>
                  <button onclick="searchCustomer()" class="bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white px-8 py-4 rounded-2xl font-semibold transition-all duration-300 shadow-lg">
                    بحث
                  </button>
                </div>
              </div>

              <div class="space-y-6">
                <h3 class="text-xl font-semibold text-emerald-200">
                  إضافة عميل جديد
                </h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                  <input type="text" id="new-customer-name" placeholder="اسم العميل" class="p-4 border-2 border-emerald-600 rounded-2xl focus:border-emerald-400 focus:outline-none bg-emerald-800/50 text-white text-lg backdrop-blur-sm"/>
                  <input type="text" id="new-customer-phone" placeholder="رقم الهاتف" class="p-4 border-2 border-emerald-600 rounded-2xl focus:border-emerald-400 focus:outline-none bg-emerald-800/50 text-white text-lg backdrop-blur-sm"/>
                </div>
                <button onclick="addNewCustomer()" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-4 rounded-2xl font-semibold transition-all duration-300 shadow-lg">
                  إضافة عميل جديد
                </button>
              </div>
            </div>
          </div>

          <!-- Customer Details Section -->
          <div id="barista-customer-details" class="bg-gradient-to-r from-emerald-800 to-emerald-900 rounded-3xl shadow-2xl p-8 mb-8 hidden border border-emerald-700">
            <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-8 gap-6">
              <h2 class="text-3xl font-playfair font-bold text-white">
                تفاصيل العميل
              </h2>
              <div id="barista-loyalty-status" class="px-6 py-3 rounded-full text-lg font-bold shadow-lg"></div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div class="lg:col-span-2 space-y-6">
                <div class="bg-emerald-700/50 backdrop-blur-sm p-6 rounded-2xl border border-emerald-600">
                  <h3 id="barista-customer-info" class="text-xl font-semibold text-white mb-4"></h3>
                  <div class="flex gap-3">
                    <button id="edit-customer-btn" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-4 py-2 rounded-xl text-sm transition-all duration-300 shadow-lg">
                      تعديل المعلومات
                    </button>
                  </div>

                  <!-- Edit form (hidden by default) -->
                  <div id="edit-customer-form" class="hidden mt-6 space-y-4">
                    <input type="text" id="edit-customer-name" placeholder="اسم العميل" class="w-full p-3 border-2 border-emerald-600 rounded-xl focus:border-emerald-400 focus:outline-none bg-emerald-600/50 text-white backdrop-blur-sm"/>
                    <input type="text" id="edit-customer-phone" placeholder="رقم الهاتف" class="w-full p-3 border-2 border-emerald-600 rounded-xl focus:border-emerald-400 focus:outline-none bg-emerald-600/50 text-white backdrop-blur-sm"/>
                    <div class="flex gap-3">
                      <button onclick="saveCustomerChanges()" class="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-4 py-2 rounded-xl text-sm transition-all duration-300 shadow-lg">
                        حفظ
                      </button>
                      <button onclick="cancelCustomerEdit()" class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-4 py-2 rounded-xl text-sm transition-all duration-300 shadow-lg">
                        إلغاء
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Loyalty Progress -->
                <div class="bg-gradient-to-r from-amber-600 to-amber-700 p-6 rounded-2xl shadow-lg">
                  <div class="flex justify-between items-center mb-4">
                    <span class="text-lg font-semibold text-amber-900">برنامج الولاء</span>
                    <span id="barista-loyalty-counter" class="text-lg font-bold text-amber-900"></span>
                  </div>
                  <div class="w-full bg-amber-900/40 rounded-full h-4 mb-2">
                    <div id="barista-loyalty-progress" class="bg-amber-900 h-4 rounded-full transition-all duration-700 shadow-inner"></div>
                  </div>
                  <p class="text-amber-900 text-sm font-medium">
                    المشروب السادس مجاني! ☕
                  </p>
                </div>

                <!-- Add Order Section -->
                <div class="border-2 border-dashed border-emerald-600 p-6 rounded-2xl bg-emerald-800/30 backdrop-blur-sm">
                  <h4 class="font-semibold text-emerald-200 mb-4 text-lg">
                    إضافة طلب جديد
                  </h4>
                  <div class="space-y-4">
                    <select id="barista-product-select" class="w-full p-4 border-2 border-emerald-600 rounded-2xl focus:border-emerald-400 focus:outline-none bg-emerald-800/50 text-white text-lg backdrop-blur-sm">
                      <option value="">اختر المنتج</option>
                      <option value="Pure Espresso,1800">
                        Pure Espresso - 1,800 دينار
                      </option>
                      <option value="Signature Americano,3200">
                        Signature Americano - 3,200 دينار
                      </option>
                      <option value="Royal Cappuccino,4200">
                        Royal Cappuccino - 4,200 دينار
                      </option>
                      <option value="Artisan Latte,4200">
                        Artisan Latte - 4,200 دينار
                      </option>
                      <option value="Golden Caramel Latte,4500">
                        Golden Caramel Latte - 4,500 دينار
                      </option>
                      <option value="V60 Pour Over Excellence,4800">
                        V60 Pour Over Excellence - 4,800 دينار
                      </option>
                      <option value="Decadent Mocha,4500">
                        Decadent Mocha - 4,500 دينار
                      </option>
                      <option value="Premium Green Tea,2800">
                        Premium Green Tea - 2,800 دينار
                      </option>
                      <option value="Earl Grey Royale,3200">
                        Earl Grey Royale - 3,200 دينار
                      </option>
                      <option value="Chamomile Serenity,2800">
                        Chamomile Serenity - 2,800 دينار
                      </option>
                      <option value="Belgian Chocolate Torte,5500">
                        Belgian Chocolate Torte - 5,500 دينار
                      </option>
                      <option value="Artisan Butter Croissant,3500">
                        Artisan Butter Croissant - 3,500 دينار
                      </option>
                      <option value="Wild Blueberry Muffin,3800">
                        Wild Blueberry Muffin - 3,800 دينار
                      </option>
                      <option value="custom">منتج مخصص</option>
                    </select>

                    <!-- Custom product fields -->
                    <div id="custom-product-fields" class="hidden grid grid-cols-2 gap-4">
                      <input type="text" id="custom-product-name" placeholder="اسم المنتج" class="p-4 border-2 border-emerald-600 rounded-2xl focus:border-emerald-400 focus:outline-none bg-emerald-800/50 text-white text-lg backdrop-blur-sm"/>
                      <input type="number" id="custom-product-price" placeholder="السعر (دينار)" class="p-4 border-2 border-emerald-600 rounded-2xl focus:border-emerald-400 focus:outline-none bg-emerald-800/50 text-white text-lg backdrop-blur-sm"/>
                    </div>

                    <button onclick="addCustomerOrder()" class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold py-4 rounded-2xl transition-all duration-300 shadow-lg text-lg">
                      إضافة الطلب و تأكيد الدفع
                    </button>
                  </div>
                </div>
              </div>

              <div>
                <h4 class="font-semibold text-emerald-200 mb-4 text-lg">
                  تاريخ الطلبات
                </h4>
                <div id="barista-order-history" class="space-y-3 max-h-96 overflow-y-auto"></div>
              </div>
            </div>
          </div>

          <!-- All Customers Table -->
          <div class="bg-gradient-to-r from-emerald-800 to-emerald-900 rounded-3xl shadow-2xl p-8 border border-emerald-700">
            <h2 class="text-3xl font-playfair font-bold text-white mb-8">
              جميع العملاء
            </h2>
            <div class="overflow-x-auto">
              <table class="min-w-full">
                <thead class="bg-emerald-700/50 backdrop-blur-sm">
                  <tr>
                    <th class="px-6 py-4 text-right text-sm font-semibold text-emerald-200 uppercase tracking-wider rounded-tl-xl">
                      اسم العميل
                    </th>
                    <th class="px-6 py-4 text-right text-sm font-semibold text-emerald-200 uppercase tracking-wider">
                      رقم الهاتف
                    </th>
                    <th class="px-6 py-4 text-right text-sm font-semibold text-emerald-200 uppercase tracking-wider">
                      عدد الطلبات
                    </th>
                    <th class="px-6 py-4 text-right text-sm font-semibold text-emerald-200 uppercase tracking-wider">
                      نقاط الولاء
                    </th>
                    <th class="px-6 py-4 text-right text-sm font-semibold text-emerald-200 uppercase tracking-wider rounded-tr-xl">
                      الإجراءات
                    </th>
                  </tr>
                </thead>
                <tbody id="barista-customers-table" class="bg-emerald-800/50 backdrop-blur-sm divide-y divide-emerald-700"></tbody>
              </table>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Footer -->
    <footer id="footer" class=" relative bg-cover bg-center bg-no-repeat text-white py-24" style="
  background-image: url(&#39;hot-coffee-turkish-.jpg&#39;);
  background-size: cover;           
  background-position: center;      
  width: 100%;
  h: 800vh;
  background-repeat: no-repeat;
">
      <div class="absolute inset-0  from-amber-900/80 via-amber-800/70 to-amber-900/80"></div>
      <div class="relative max-w-7xl mx-auto px-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left">
          <!-- About Us -->
          <div class="fade-in-up">
            <div class="flex items-center justify-center md:justify-start gap-3 mb-6">
              <div class="w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-xl flex items-center justify-center">
                <i class=" logo footr">
                  <img src="8035b066-96f2-4126-a499-977dcf95802f.JPG" alt=""/>
                </i>
              </div>
              <h3 class="text-2xl font-playfair font-bold text-amber-200">
                TWENTY ONE CAFE
              </h3>
            </div>
            <p class="text-amber-100 leading-relaxed text-lg">
              We&#39;re passionate about crafting exceptional experiences
              through premium coffee, artisanal teas, and exquisite pastries.
              Every cup tells a story of quality, tradition, and innovation.
            </p>
          </div>

          <!-- Quick Links -->
          <div class="text-center fade-in-up">
            <h3 class="text-2xl font-playfair font-bold text-amber-200 mb-6">
              Quick Links
            </h3>
            <ul class="space-y-4">
              <li>
                <a href="#home" class="text-amber-100 hover:text-amber-300 transition-colors duration-300 text-lg">Home</a>
              </li>
              <li>
                <a href="#menu" class="text-amber-100 hover:text-amber-300 transition-colors duration-300 text-lg">Our Menu</a>
              </li>
              <li>
                <a href="#shop" class="text-amber-100 hover:text-amber-300 transition-colors duration-300 text-lg">Shop</a>
              </li>
              <li>
                <a href="#contact" class="text-amber-100 hover:text-amber-300 transition-colors duration-300 text-lg">Contact Us</a>
              </li>
            </ul>
            <div class="mt-8 flex justify-center gap-6">
              <a href="https://www.facebook.com/share/19qCkEktiS/" class="w-12 h-12 bg-amber-700/50 backdrop-blur-sm rounded-xl flex items-center justify-center text-white hover:bg-amber-600/70 transition-all duration-300 transform hover:scale-110">
                <i class="fab fa-facebook-f text-xl"></i>
              </a>
              <a href="https://www.instagram.com/21cafe_iq?igsh=MWtmMWd3dHI1djgwMA==" class="w-12 h-12 bg-amber-700/50 backdrop-blur-sm rounded-xl flex items-center justify-center text-white hover:bg-amber-600/70 transition-all duration-300 transform hover:scale-110">
                <i class="fab fa-instagram text-xl"></i>
              </a>
            </div>
          </div>

          <!-- Contact Info -->
          <div class="fade-in-up">
            <h3 class="text-2xl font-playfair font-bold text-amber-200 mb-6">
              Visit Us
            </h3>
            <div class="space-y-4 text-amber-100 text-lg">
              <p class="flex items-center justify-center md:justify-start gap-3">
                <i class="fas fa-map-marker-alt text-amber-300"></i>
                <a href="https://maps.app.goo.gl/h5bTu8cunhsGoSPa9" target="_blank" rel="noopener noreferrer">TWENTY ONE CAFE 21</a>
              </p>
              <p class="flex items-center justify-center md:justify-start gap-3">
                <i class="fas fa-phone text-amber-300"></i>
                 07841002005
              </p>
              <p class="flex items-center justify-center md:justify-start gap-3">
                <i class="fas fa-envelope text-amber-300"></i>
                twenty2one1cafe@gmail.com
              </p>
              <p class="flex items-center justify-center md:justify-start gap-3">
                <i class="fas fa-clock text-amber-300"></i>
                Daily: 6:00 AM - 3:00 AM
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Notification System -->
    <div id="notification" class="fixed top-6 right-6 z-50 hidden">
      <div id="notification-content" class="bg-gradient-to-r from-emerald-600 to-emerald-700 text-white px-8 py-4 rounded-2xl shadow-2xl transform transition-all duration-500 backdrop-blur-sm border border-emerald-500">
        <p id="notification-text" class="text-lg font-semibold"></p>
      </div>
    </div>

    <script>
      // ===== Firebase Configuration =====
      const firebaseConfig = {
        // Replace with your Firebase config
        apiKey: "your-api-key-here",
        authDomain: "your-project.firebaseapp.com",
        databaseURL: "https://your-project-default-rtdb.firebaseio.com/",
        projectId: "your-project-id",
        storageBucket: "your-project.appspot.com",
        messagingSenderId: "123456789",
        appId: "your-app-id"
      };

      // Firebase connection status
      let isFirebaseConnected = false;
      let database = null;

      // Try to initialize Firebase
      try {
        if (firebaseConfig.apiKey !== "your-api-key-here") {
          firebase.initializeApp(firebaseConfig);
          database = firebase.database();
          
          // Test connection
          const connectedRef = database.ref(".info/connected");
          connectedRef.on("value", (snapshot) => {
            isFirebaseConnected = snapshot.val();
            updateConnectionStatus();
            
            if (isFirebaseConnected) {
              console.log("🔥 Firebase connected successfully");
              syncWithFirebase();
            } else {
              console.log("🔥 Firebase disconnected");
            }
          });
        } else {
          console.log("🔥 Firebase not configured - using local storage only");
          updateConnectionStatus();
        }
      } catch (error) {
        console.log("🔥 Firebase initialization failed:", error);
        isFirebaseConnected = false;
        updateConnectionStatus();
      }

      function updateConnectionStatus() {
        const statusElement = document.getElementById("connection-status");
        const textElement = document.getElementById("connection-text");
        
        if (isFirebaseConnected) {
          statusElement.className = "connection-status connection-online";
          textElement.textContent = "متصل - تزامن فوري";
        } else {
          statusElement.className = "connection-status connection-offline";
          textElement.textContent = "غير متصل - محلي فقط";
        }
      }

      // ===== Global Variables =====
      let currentCustomer = null;
      let selectedBaristaCustomer = null;
      let customers = [];
      let pendingOrders = [];
      let shopOrders = [];
      let customProducts = [];
      let shoppingCart = [];
      const STAMPS_FOR_FREE = 6;
      const DEFAULT_BARISTA_PIN = "1234";

      // ===== Firebase Sync Functions =====
      function syncWithFirebase() {
        if (!isFirebaseConnected || !database) return;

        // Listen to pending orders
        database.ref('pendingOrders').on('value', (snapshot) => {
          const firebaseOrders = snapshot.val();
          if (firebaseOrders) {
            const newOrders = Object.keys(firebaseOrders).map(key => ({
              ...firebaseOrders[key],
              firebaseKey: key
            }));
            
            // Check for new orders
            const currentOrderIds = pendingOrders.map(o => o.id);
            const newOrdersOnly = newOrders.filter(o => !currentOrderIds.includes(o.id));
            
            if (newOrdersOnly.length > 0) {
              showNewOrderNotification();
            }
            
            pendingOrders = newOrders;
            renderPendingOrders();
          }
        });

        // Listen to shop orders
        database.ref('shopOrders').on('value', (snapshot) => {
          const firebaseShopOrders = snapshot.val();
          if (firebaseShopOrders) {
            shopOrders = Object.keys(firebaseShopOrders).map(key => ({
              ...firebaseShopOrders[key],
              firebaseKey: key
            }));
            renderShopOrders();
          }
        });

        // Listen to customers
        database.ref('customers').on('value', (snapshot) => {
          const firebaseCustomers = snapshot.val();
          if (firebaseCustomers) {
            customers = Object.keys(firebaseCustomers).map(key => ({
              ...firebaseCustomers[key],
              firebaseKey: key
            }));
            renderBaristaCustomersTable();
          }
        });
      }

      function pushToFirebase(path, data) {
        if (isFirebaseConnected && database) {
          database.ref(path).push(data).catch(error => {
            console.error("Firebase push error:", error);
          });
        }
      }

      function updateFirebase(path, data) {
        if (isFirebaseConnected && database) {
          database.ref(path).set(data).catch(error => {
            console.error("Firebase update error:", error);
          });
        }
      }

      function removeFromFirebase(path) {
        if (isFirebaseConnected && database) {
          database.ref(path).remove().catch(error => {
            console.error("Firebase remove error:", error);
          });
        }
      }

      function showNewOrderNotification() {
        const notification = document.getElementById("new-order-notification");
        notification.classList.remove("hidden");
        
        // Play notification sound if available
        try {
          const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmzhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJfHgU2jdTx1oU6CBVY4+3eo2QQDFqz5O2QQAoUXrTp66hVFApGn+DyvmwhCSqI0/LYiTUIG2i73+ubUQsNUKXi8bJf');
          audio.play();
        } catch (e) {
          // Notification sound failed, continue silently
        }
        
        setTimeout(() => {
          notification.classList.add("hidden");
        }, 5000);
      }

      // Add click handler to notification
      document.getElementById("new-order-notification").addEventListener("click", () => {
        // Open barista dashboard if not already open
        if (document.getElementById("barista-dashboard").classList.contains("hidden")) {
          document.getElementById("barista-modal").classList.remove("hidden");
          document.getElementById("barista-modal").classList.add("flex");
        }
        document.getElementById("new-order-notification").classList.add("hidden");
      });

      // ===== Utility Functions =====
      function showNotification(message, type = "success") {
        const notification = document.getElementById("notification");
        const notificationContent = document.getElementById(
          "notification-content"
        );
        const notificationText = document.getElementById("notification-text");

        notificationText.textContent = message;

        if (type === "error") {
          notificationContent.className =
            "bg-gradient-to-r from-red-600 to-red-700 text-white px-8 py-4 rounded-2xl shadow-2xl transform transition-all duration-500 backdrop-blur-sm border border-red-500";
        } else {
          notificationContent.className =
            "bg-gradient-to-r from-emerald-600 to-emerald-700 text-white px-8 py-4 rounded-2xl shadow-2xl transform transition-all duration-500 backdrop-blur-sm border border-emerald-500";
        }

        notification.classList.remove("hidden");
        notificationContent.style.transform = "translateX(0)";

        setTimeout(() => {
          notificationContent.style.transform = "translateX(100%)";
          setTimeout(() => {
            notification.classList.add("hidden");
          }, 300);
        }, 4000);
      }

      function generateId() {
        return "_" + Math.random().toString(36).substr(2, 9);
      }

      function formatPrice(price) {
        return price.toLocaleString() + " IQD";
      }

      function saveCustomers() {
        localStorage.setItem(
          "cafeEleganceCustomers",
          JSON.stringify(customers)
        );
        
        if (isFirebaseConnected) {
          updateFirebase('customers', customers);
        }
      }

      function savePendingOrders() {
        localStorage.setItem(
          "cafeElegancePendingOrders",
          JSON.stringify(pendingOrders)
        );
      }

      function saveShopOrders() {
        localStorage.setItem(
          "cafeEleganceShopOrders",
          JSON.stringify(shopOrders)
        );
      }

      function saveCustomProducts() {
        localStorage.setItem(
          "cafeEleganceCustomProducts",
          JSON.stringify(customProducts)
        );
      }

      function saveShoppingCart() {
        localStorage.setItem(
          "cafeEleganceShoppingCart",
          JSON.stringify(shoppingCart)
        );
        updateCartDisplay();
      }

      function loadCustomers() {
        const stored = localStorage.getItem("cafeEleganceCustomers");
        if (stored) {
          customers = JSON.parse(stored);
        } else {
          // Initialize with sample data
          customers = [
            {
              id: generateId(),
              name: "Ahmed Al-Mahmoud",
              phone: "07501234567",
              orders: [
                {
                  id: generateId(),
                  product: "Signature Americano",
                  price: 3200,
                  date: new Date().toISOString(),
                  isFree: false,
                },
              ],
              loyaltyPoints: 1,
            },
          ];
          saveCustomers();
        }
      }

      function loadPendingOrders() {
        const stored = localStorage.getItem("cafeElegancePendingOrders");
        if (stored) {
          pendingOrders = JSON.parse(stored);
        }
        renderPendingOrders();
      }

      function loadShopOrders() {
        const stored = localStorage.getItem("cafeEleganceShopOrders");
        if (stored) {
          shopOrders = JSON.parse(stored);
        }
        renderShopOrders();
      }

      function loadCustomProducts() {
        const stored = localStorage.getItem("cafeEleganceCustomProducts");
        if (stored) {
          customProducts = JSON.parse(stored);
          updateProductSelect();
        }
      }

      function loadShoppingCart() {
        const stored = localStorage.getItem("cafeEleganceShoppingCart");
        if (stored) {
          shoppingCart = JSON.parse(stored);
        }
        updateCartDisplay();
      }

      function updateProductSelect() {
        const select = document.getElementById("barista-product-select");
        const customOption = select.querySelector('option[value="custom"]');

        // Remove existing custom products
        const options = select.querySelectorAll("option");
        options.forEach((option) => {
          if (option.dataset.custom === "true") {
            option.remove();
          }
        });

        // Add custom products before the "custom" option
        customProducts.forEach((product) => {
          const option = document.createElement("option");
          option.value = `${product.name},${product.price}`;
          option.textContent = `${product.name} - ${formatPrice(
            product.price
          )}`;
          option.dataset.custom = "true";
          select.insertBefore(option, customOption);
        });
      }

      // ===== Shopping Cart Functions =====
      function addToCart(name, price, image) {
        const existingItem = shoppingCart.find((item) => item.name === name);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          shoppingCart.push({
            id: generateId(),
            name: name,
            price: price,
            image: image,
            quantity: 1,
          });
        }

        saveShoppingCart();
        showNotification(`${name} تم إضافته للسلة! سيصل للباريستا فوراً على جميع الأجهزة`);
      }

      function removeFromCart(itemId) {
        shoppingCart = shoppingCart.filter((item) => item.id !== itemId);
        saveShoppingCart();
        renderCartItems();
      }

      function updateQuantity(itemId, newQuantity) {
        if (newQuantity <= 0) {
          removeFromCart(itemId);
          return;
        }

        const item = shoppingCart.find((item) => item.id === itemId);
        if (item) {
          item.quantity = newQuantity;
          saveShoppingCart();
          renderCartItems();
        }
      }

      function updateCartDisplay() {
        const cartBadges = [
          document.getElementById("cart-badge"),
          document.getElementById("mobile-cart-badge"),
        ];

        const totalItems = shoppingCart.reduce(
          (sum, item) => sum + item.quantity,
          0
        );

        cartBadges.forEach((badge) => {
          if (badge) {
            if (totalItems > 0) {
              badge.textContent = totalItems;
              badge.classList.remove("hidden");
            } else {
              badge.classList.add("hidden");
            }
          }
        });
      }

      function toggleCart() {
        document.getElementById("cart-modal").classList.toggle("hidden");
        document.getElementById("cart-modal").classList.toggle("flex");
        renderCartItems();
      }

      function renderCartItems() {
        const container = document.getElementById("cart-items-container");
        const totalElement = document.getElementById("cart-total-amount");

        if (shoppingCart.length === 0) {
          container.innerHTML =
            '<p class="text-center text-amber-700 text-lg">Your cart is empty</p>';
          totalElement.textContent = "0";
          return;
        }

        let total = 0;
        container.innerHTML = "";

        shoppingCart.forEach((item) => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;

          const cartItemDiv = document.createElement("div");
          cartItemDiv.className = "cart-item";
          cartItemDiv.innerHTML = `
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4">
            <img src="${item.image}" alt="${
            item.name
          }" class="w-12 h-12 rounded-lg object-cover">
            <div class="flex-1 min-w-0">
                 <h4 class="font-semibold text-amber-900 text-sm sm:text-base truncate">${
                   item.name
                 }</h4>
                 <p class="text-amber-700 text-xs sm:text-sm">${formatPrice(
                   item.price
                 )} each</p>
            </div>
            <div class="flex items-center gap-2 sm:gap-3">
            <button class="quantity-btn text-sm" onclick="updateQuantity('${
              item.id
            }', ${item.quantity - 1})">-</button>
              <span class="w-6 sm:w-8 text-center font-semibold text-sm sm:text-base">${
                item.quantity
              }</span>
              <button class="quantity-btn text-sm" onclick="updateQuantity('${
                item.id
              }', ${item.quantity + 1})">+</button>
            </div>
             <div class="flex items-center justify-between sm:justify-end w-full sm:w-auto gap-3">
              <p class="font-bold text-amber-900 text-sm sm:text-base">${formatPrice(
                itemTotal
              )}</p>
              <button onclick="removeFromCart('${
                item.id
              }')" class="text-red-600 hover:text-red-800 text-sm p-1">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        `;
          container.appendChild(cartItemDiv);
        });

        totalElement.textContent = formatPrice(total);
      }

      function proceedToCheckout() {
        if (shoppingCart.length === 0) {
          showNotification("Your cart is empty!", "error");
          return;
        }

        document.getElementById("cart-modal").classList.add("hidden");
        document.getElementById("cart-modal").classList.remove("flex");

        // Populate checkout summary
        const checkoutItemsList = document.getElementById(
          "checkout-items-list"
        );
        const checkoutTotalAmount = document.getElementById(
          "checkout-total-amount"
        );

        let total = 0;
        checkoutItemsList.innerHTML = "";

        shoppingCart.forEach((item) => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;

          const itemDiv = document.createElement("div");
          itemDiv.className =
            "flex justify-between text-amber-800 text-sm sm:text-base";
          itemDiv.innerHTML = `
          <span class="truncate pr-2">${item.name} × ${item.quantity}</span>
          <span class="font-semibold">${formatPrice(itemTotal)}</span>
        `;
          checkoutItemsList.appendChild(itemDiv);
        });

        checkoutTotalAmount.textContent = formatPrice(total);

        document.getElementById("checkout-modal").classList.remove("hidden");
        document.getElementById("checkout-modal").classList.add("flex");
      }

      function submitOrder() {
        const name = document.getElementById("checkout-name").value.trim();
        const phone = document.getElementById("checkout-phone").value.trim();
        const address = document
          .getElementById("checkout-address")
          .value.trim();
        const notes = document.getElementById("checkout-notes").value.trim();

        if (!name || !phone || !address) {
          showNotification("Please fill in all required fields", "error");
          return;
        }

        const order = {
          id: generateId(),
          customerName: name,
          customerPhone: phone,
          customerAddress: address,
          notes: notes,
          items: [...shoppingCart],
          total: shoppingCart.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0
          ),
          date: new Date().toISOString(),
          status: "pending",
        };

        shopOrders.push(order);
        saveShopOrders();
        
        // Push to Firebase
        if (isFirebaseConnected) {
          pushToFirebase('shopOrders', order);
        }
        
        renderShopOrders();

        // Clear cart and close modal
        shoppingCart = [];
        saveShoppingCart();

        document.getElementById("checkout-modal").classList.add("hidden");
        document.getElementById("checkout-modal").classList.remove("flex");

        // Reset form
        document.getElementById("checkout-form").reset();

        showNotification(
          "تم إرسال طلبك بنجاح! وصل للباريستا على جميع الأجهزة فوراً وسيتم التواصل معك قريباً"
        );
      }

      // ===== Shop Orders Functions =====
      function renderShopOrders() {
        const container = document.getElementById("shop-orders-container");
        const section = document.getElementById("shop-orders-section");

        if (shopOrders.length === 0) {
          section.classList.add("hidden");
          return;
        }

        section.classList.remove("hidden");
        container.innerHTML = "";

        shopOrders.forEach((order) => {
          const orderDiv = document.createElement("div");
          orderDiv.className =
            "bg-blue-700/50 backdrop-blur-sm p-6 rounded-2xl border border-blue-600";

          const itemsList = order.items
            .map(
              (item) =>
                `${item.name} × ${item.quantity} (${formatPrice(
                  item.price * item.quantity
                )})`
            )
            .join(", ");

          orderDiv.innerHTML = `
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div>
              <h4 class="font-bold text-white text-xl mb-2">${
                order.customerName
              }</h4>
              <p class="text-blue-200"><i class="fas fa-phone mr-2"></i>${
                order.customerPhone
              }</p>
              <p class="text-blue-200 text-sm"><i class="fas fa-map-marker-alt mr-2"></i>${
                order.customerAddress
              }</p>
              ${
                order.notes
                  ? `<p class="text-blue-300 text-sm mt-2"><i class="fas fa-sticky-note mr-2"></i>${order.notes}</p>`
                  : ""
              }
            </div>
            <div>
              <h5 class="font-semibold text-blue-200 mb-2">المنتجات:</h5>
              <p class="text-white text-sm">${itemsList}</p>
              <p class="text-blue-200 text-sm mt-2">${new Date(
                order.date
              ).toLocaleString()}</p>
            </div>
            <div class="flex flex-col gap-3">
              <div class="text-right">
                <p class="text-2xl font-bold text-white">${formatPrice(
                  order.total
                )}</p>
              </div>
              <div class="flex gap-3">
                <button onclick="confirmShopOrder('${
                  order.id
                }')" class="flex-1 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-4 py-2 rounded-xl font-semibold transition-all duration-300 shadow-lg">
                  تأكيد الطلب و إضافة ختم
                </button>
                <button onclick="cancelShopOrder('${
                  order.id
                }')" class="flex-1 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-4 py-2 rounded-xl font-semibold transition-all duration-300 shadow-lg">
                  إلغاء
                </button>
              </div>
            </div>
          </div>
        `;
          container.appendChild(orderDiv);
        });
      }

      function confirmShopOrder(orderId) {
        const order = shopOrders.find((o) => o.id === orderId);
        if (!order) return;

        // Find or create customer
        let customer = customers.find(
          (c) =>
            c.name.toLowerCase() === order.customerName.toLowerCase() ||
            c.phone === order.customerPhone
        );

        if (!customer) {
          // Create new customer
          customer = {
            id: generateId(),
            name: order.customerName,
            phone: order.customerPhone,
            orders: [],
            loyaltyPoints: 0,
          };
          customers.push(customer);
        }

        let isFree = false;

        // Check if customer is eligible for free drink
        if (customer.loyaltyPoints >= STAMPS_FOR_FREE) {
          isFree = true;
          customer.loyaltyPoints = 0; // Reset stamps
          showNotification(
            "🎉 العميل استحق مشروب مجاني! تم إعادة تعيين الأختام"
          );
        } else {
          customer.loyaltyPoints += 1;
          showNotification(
            "تم تأكيد الطلب وإضافة ختم ولاء للعميل!"
          );
        }

        // Add order to customer's history
        const newOrder = {
          id: generateId(),
          product: order.items.map(item => `${item.name} x${item.quantity}`).join(', '),
          price: order.total,
          date: order.date,
          isFree: isFree,
        };

        customer.orders.push(newOrder);

        // Remove from shop orders
        shopOrders = shopOrders.filter((o) => o.id !== orderId);
        
        // Save and sync
        saveCustomers();
        saveShopOrders();
        
        if (isFirebaseConnected && order.firebaseKey) {
          removeFromFirebase(`shopOrders/${order.firebaseKey}`);
        }

        renderShopOrders();
        renderBaristaCustomersTable();

        // Update current customer display if it's the same customer
        if (currentCustomer && currentCustomer.phone === customer.phone) {
          currentCustomer = customer;
          updateCustomerDisplay();
        }
      }

      function cancelShopOrder(orderId) {
        const order = shopOrders.find((o) => o.id === orderId);
        shopOrders = shopOrders.filter((order) => order.id !== orderId);
        
        saveShopOrders();
        
        if (isFirebaseConnected && order && order.firebaseKey) {
          removeFromFirebase(`shopOrders/${order.firebaseKey}`);
        }
        
        renderShopOrders();
        showNotification("تم إلغاء طلب المتجر");
      }

      // ===== Product Modal Functions =====
      let currentProduct = null;

      function showProductModal(productData) {
        currentProduct = productData;
        document.getElementById("product-modal-image").src = productData.image;
        document.getElementById("product-modal-image").alt = productData.name;
        document.getElementById("product-modal-title").textContent =
          productData.name;
        document.getElementById("product-modal-price").textContent =
          productData.price + " IQD";
        document.getElementById("product-modal-description").textContent =
          productData.description;

        document.getElementById("product-modal").classList.remove("hidden");
        document.getElementById("product-modal").classList.add("flex");
      }

      function closeProductModal() {
        document.getElementById("product-modal").classList.add("hidden");
        document.getElementById("product-modal").classList.remove("flex");
        currentProduct = null;
      }

      function orderNow() {
        if (!currentCustomer) {
          showNotification("Please login first to place an order", "error");
          closeProductModal();
          document.getElementById("customer-modal").classList.remove("hidden");
          document.getElementById("customer-modal").classList.add("flex");
          return;
        }

        if (!currentProduct) return;

        // Create pending order
        const newOrder = {
          id: generateId(),
          customerId: currentCustomer.id,
          customerName: currentCustomer.name,
          product: currentProduct.name,
          price: currentProduct.priceNum,
          date: new Date().toISOString(),
          status: "pending",
        };

        pendingOrders.push(newOrder);
        savePendingOrders();
        
        // Push to Firebase
        if (isFirebaseConnected) {
          pushToFirebase('pendingOrders', newOrder);
        }
        
        renderPendingOrders();

        showNotification(
          `تم إرسال الطلب: ${currentProduct.name}. وصل للباريستا على جميع الأجهزة فوراً!`
        );
        closeProductModal();
      }

      // ===== Pending Orders Functions =====
      function renderPendingOrders() {
        const container = document.getElementById("pending-orders-container");
        const section = document.getElementById("pending-orders-section");

        if (pendingOrders.length === 0) {
          section.classList.add("hidden");
          return;
        }

        section.classList.remove("hidden");
        container.innerHTML = "";

        pendingOrders.forEach((order) => {
          const orderDiv = document.createElement("div");
          orderDiv.className =
            "bg-red-700/50 backdrop-blur-sm p-6 rounded-2xl flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 border border-red-600";
          orderDiv.innerHTML = `
          <div class="flex-1">
            <h4 class="font-bold text-white text-xl mb-2">${
              order.customerName
            }</h4>
            <p class="text-red-200 text-lg">${order.product} - ${formatPrice(
            order.price
          )}</p>
            <p class="text-red-300 text-sm">${new Date(
              order.date
            ).toLocaleString()}</p>
          </div>
          <div class="flex gap-3 w-full lg:w-auto">
            <button onclick="confirmOrder('${
              order.id
            }')" class="flex-1 lg:flex-none bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg">
              تأكيد الدفع و إضافة ختم
            </button>
            <button onclick="cancelOrder('${
              order.id
            }')" class="flex-1 lg:flex-none bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 shadow-lg">
              إلغاء
            </button>
          </div>
        `;
          container.appendChild(orderDiv);
        });
      }

      function confirmOrder(orderId) {
        const order = pendingOrders.find((o) => o.id === orderId);
        if (!order) return;

        const customer = customers.find((c) => c.id === order.customerId);
        if (!customer) return;

        let isFree = false;

        // Check if customer is eligible for free drink
        if (customer.loyaltyPoints >= STAMPS_FOR_FREE) {
          isFree = true;
          customer.loyaltyPoints = 0; // Reset stamps
          showNotification(
            "🎉 مشروب مجاني تم استرداده! تم إعادة تعيين أختام العميل"
          );
        } else {
          customer.loyaltyPoints += 1;
          showNotification(
            "تم تأكيد الطلب واستلام الدفع. تم إضافة ختم ولاء!"
          );
        }

        const newOrder = {
          id: generateId(),
          product: order.product,
          price: order.price,
          date: order.date,
          isFree: isFree,
        };

        customer.orders.push(newOrder);

        // Remove from pending orders
        const orderToRemove = pendingOrders.find((o) => o.id === orderId);
        pendingOrders = pendingOrders.filter((o) => o.id !== orderId);

        saveCustomers();
        savePendingOrders();
        
        if (isFirebaseConnected && orderToRemove && orderToRemove.firebaseKey) {
          removeFromFirebase(`pendingOrders/${orderToRemove.firebaseKey}`);
        }
        
        renderPendingOrders();
        updateBaristaCustomerDisplay();
        renderBaristaCustomersTable();

        // Update current customer display if it's the same customer
        if (currentCustomer && currentCustomer.id === customer.id) {
          currentCustomer = customer;
          updateCustomerDisplay();
        }
      }

      function cancelOrder(orderId) {
        const order = pendingOrders.find((o) => o.id === orderId);
        pendingOrders = pendingOrders.filter((o) => o.id !== orderId);
        
        savePendingOrders();
        
        if (isFirebaseConnected && order && order.firebaseKey) {
          removeFromFirebase(`pendingOrders/${order.firebaseKey}`);
        }
        
        renderPendingOrders();
        showNotification("تم إلغاء الطلب");
      }

      // ===== Customer Functions =====
      function findOrCreateCustomer(identifier) {
        // Try to find existing customer by name or phone
        let customer = customers.find(
          (c) =>
            c.name.toLowerCase() === identifier.toLowerCase() ||
            c.phone === identifier
        );

        if (!customer) {
          // Create new customer
          customer = {
            id: generateId(),
            name: identifier,
            phone: identifier.match(/^\d+$/) ? identifier : "",
            orders: [],
            loyaltyPoints: 0,
          };
          customers.push(customer);
          saveCustomers();
          showNotification(
            `مرحباً بك في TWENTY ONE CAFE يا ${customer.name}! تم انضمامك لبرنامج المكافآت المميز`
          );
        } else {
          showNotification(`أهلاً وسهلاً بعودتك يا ${customer.name}!`);
        }

        return customer;
      }

      function updateCustomerDisplay() {
        if (!currentCustomer) return;

        const nameDisplays = [
          document.getElementById("customer-name-display"),
          document.getElementById("mobile-customer-name-display"),
        ];

        const stampsDisplays = [
          document.getElementById("customer-stamps-display"),
          document.getElementById("mobile-customer-stamps-display"),
        ];

        const customerStatus = [
          document.getElementById("customer-status"),
          document.getElementById("mobile-customer-status"),
        ];

        nameDisplays.forEach((display) => {
          if (display) display.textContent = currentCustomer.name;
        });

        stampsDisplays.forEach((display) => {
          if (display) {
            display.innerHTML = "";
            for (let i = 1; i <= STAMPS_FOR_FREE; i++) {
              const stamp = document.createElement("div");
              stamp.className = `w-6 h-6 sm:w-7 sm:h-7 border-2 border-amber-600 rounded-full flex items-center justify-center text-xs font-semibold transition-all duration-300 ${
                currentCustomer.loyaltyPoints >= i
                  ? "bg-amber-600 text-white scale-110"
                  : "bg-transparent text-amber-600"
              }`;
              stamp.textContent = i;
              display.appendChild(stamp);
            }
          }
        });

        customerStatus.forEach((status) => {
          if (status) status.classList.remove("hidden");
        });

        // Update dashboard if open
        updateCustomerDashboard();
      }

      function updateCustomerDashboard() {
        if (!currentCustomer) return;

        document.getElementById("dashboard-customer-name").textContent =
          currentCustomer.name;
        document.getElementById(
          "dashboard-loyalty-counter"
        ).textContent = `${currentCustomer.loyaltyPoints}/${STAMPS_FOR_FREE}`;

        const progress =
          (currentCustomer.loyaltyPoints / STAMPS_FOR_FREE) * 100;
        document.getElementById(
          "dashboard-loyalty-progress"
        ).style.width = `${Math.min(progress, 100)}%`;

        // Render stamps grid
        const stampsGrid = document.getElementById("dashboard-stamps-grid");
        stampsGrid.innerHTML = "";
        for (let i = 1; i <= STAMPS_FOR_FREE; i++) {
          const stamp = document.createElement("div");
          stamp.className = `stamp-circle ${
            currentCustomer.loyaltyPoints >= i ? "filled" : ""
          }`;
          stamp.textContent = i;
          stampsGrid.appendChild(stamp);
        }

        // Render order history
        const orderHistory = document.getElementById("dashboard-order-history");
        orderHistory.innerHTML = "";

        const recentOrders = currentCustomer.orders.slice(-10).reverse();
        recentOrders.forEach((order) => {
          const orderDiv = document.createElement("div");
          orderDiv.className =
            "bg-white/80 backdrop-blur-sm p-4 rounded-xl flex justify-between items-center shadow-md";
          orderDiv.innerHTML = `
          <div>
            <div class="font-semibold text-amber-900 text-lg">${
              order.product
            }</div>
            <div class="text-sm text-amber-700">${new Date(
              order.date
            ).toLocaleDateString()}</div>
          </div>
          <div class="text-right">
            <div class="font-bold text-lg ${
              order.isFree ? "text-emerald-600" : "text-amber-900"
            }">
              ${order.isFree ? "COMPLIMENTARY" : formatPrice(order.price)}
            </div>
            ${
              order.isFree
                ? '<span class="text-xs text-emerald-600">🎉 Elite Reward</span>'
                : ""
            }
          </div>
        `;
          orderHistory.appendChild(orderDiv);
        });
      }

      function customerLogout() {
        currentCustomer = null;
        document.getElementById("customer-status").classList.add("hidden");
        document
          .getElementById("mobile-customer-status")
          .classList.add("hidden");
        document.getElementById("customer-dashboard").classList.add("hidden");
        showNotification("تم تسجيل الخروج بنجاح");
      }

      // ===== Barista Functions =====
      function searchCustomer() {
        const searchTerm = document
          .getElementById("search-customer")
          .value.trim()
          .toLowerCase();
        if (!searchTerm) {
          showNotification("Please enter a search term", "error");
          return;
        }

        const found = customers.filter(
          (c) =>
            c.name.toLowerCase().includes(searchTerm) ||
            c.phone.includes(searchTerm)
        );

        if (found.length === 0) {
          showNotification("Customer not found", "error");
          document
            .getElementById("barista-customer-details")
            .classList.add("hidden");
          return;
        }

        if (found.length === 1) {
          selectBaristaCustomer(found[0].id);
        } else {
          renderBaristaCustomersTable(found);
          showNotification(`Found ${found.length} customers`);
        }
      }

      function selectBaristaCustomer(customerId) {
        selectedBaristaCustomer = customers.find((c) => c.id === customerId);
        if (!selectedBaristaCustomer) return;

        document
          .getElementById("barista-customer-details")
          .classList.remove("hidden");
        updateBaristaCustomerDisplay();
      }

      function updateBaristaCustomerDisplay() {
        if (!selectedBaristaCustomer) return;

        document.getElementById("barista-customer-info").textContent = `${
          selectedBaristaCustomer.name
        } - ${selectedBaristaCustomer.phone || "No phone"}`;

        document.getElementById(
          "barista-loyalty-counter"
        ).textContent = `${selectedBaristaCustomer.loyaltyPoints}/${STAMPS_FOR_FREE}`;

        const progress =
          (selectedBaristaCustomer.loyaltyPoints / STAMPS_FOR_FREE) * 100;
        document.getElementById(
          "barista-loyalty-progress"
        ).style.width = `${Math.min(progress, 100)}%`;

        // Update loyalty status
        const loyaltyStatus = document.getElementById("barista-loyalty-status");
        if (selectedBaristaCustomer.loyaltyPoints >= STAMPS_FOR_FREE) {
          loyaltyStatus.textContent = "مؤهل للمشروب المجاني!";
          loyaltyStatus.className =
            "px-6 py-3 rounded-full text-lg font-bold bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg float-gently";
        } else {
          loyaltyStatus.textContent = `يحتاج ${
            STAMPS_FOR_FREE - selectedBaristaCustomer.loyaltyPoints
          } أختام أكثر`;
          loyaltyStatus.className =
            "px-6 py-3 rounded-full text-lg font-bold bg-gradient-to-r from-gray-600 to-gray-700 text-white shadow-lg";
        }

        // Render order history
        const orderHistory = document.getElementById("barista-order-history");
        orderHistory.innerHTML = "";

        const recentOrders = selectedBaristaCustomer.orders
          .slice(-10)
          .reverse();
        recentOrders.forEach((order) => {
          const orderDiv = document.createElement("div");
          orderDiv.className =
            "bg-emerald-700/50 backdrop-blur-sm p-4 rounded-xl border border-emerald-600";
          orderDiv.innerHTML = `
          <div class="font-semibold text-white text-lg mb-1">${
            order.product
          }</div>
          <div class="text-sm text-emerald-200">${new Date(
            order.date
          ).toLocaleDateString()}</div>
          <div class="text-lg font-bold ${
            order.isFree ? "text-green-400" : "text-emerald-200"
          }">
            ${order.isFree ? "COMPLIMENTARY" : formatPrice(order.price)}
          </div>
        `;
          orderHistory.appendChild(orderDiv);
        });

        // Populate edit form with current data
        document.getElementById("edit-customer-name").value =
          selectedBaristaCustomer.name;
        document.getElementById("edit-customer-phone").value =
          selectedBaristaCustomer.phone || "";
      }

      function addNewCustomer() {
        const name = document.getElementById("new-customer-name").value.trim();
        const phone = document
          .getElementById("new-customer-phone")
          .value.trim();

        if (!name) {
          showNotification("Please enter customer name", "error");
          return;
        }

        if (
          customers.some((c) => c.name.toLowerCase() === name.toLowerCase())
        ) {
          showNotification("Customer already exists", "error");
          return;
        }

        const newCustomer = {
          id: generateId(),
          name: name,
          phone: phone || "",
          orders: [],
          loyaltyPoints: 0,
        };

        customers.push(newCustomer);
        saveCustomers();
        showNotification("Customer added successfully");

        document.getElementById("new-customer-name").value = "";
        document.getElementById("new-customer-phone").value = "";

        renderBaristaCustomersTable();
      }

      function addCustomerOrder() {
        if (!selectedBaristaCustomer) {
          showNotification("Please select a customer first", "error");
          return;
        }

        const productSelect = document.getElementById("barista-product-select");
        const selectedValue = productSelect.value;

        if (!selectedValue) {
          showNotification("Please select a product", "error");
          return;
        }

        let productName, price;

        if (selectedValue === "custom") {
          // Handle custom product
          const customName = document
            .getElementById("custom-product-name")
            .value.trim();
          const customPrice = parseInt(
            document.getElementById("custom-product-price").value
          );

          if (!customName || !customPrice || customPrice <= 0) {
            showNotification(
              "Please enter valid custom product details",
              "error"
            );
            return;
          }

          productName = customName;
          price = customPrice;

          // Save custom product for future use
          const existingCustomProduct = customProducts.find(
            (p) => p.name === customName
          );
          if (!existingCustomProduct) {
            customProducts.push({ name: customName, price: customPrice });
            saveCustomProducts();
            updateProductSelect();
          }

          // Clear custom fields
          document.getElementById("custom-product-name").value = "";
          document.getElementById("custom-product-price").value = "";
        } else {
          [productName, priceStr] = selectedValue.split(",");
          price = parseInt(priceStr);
        }

        let isFree = false;

        // Check if customer is eligible for free drink
        if (selectedBaristaCustomer.loyaltyPoints >= STAMPS_FOR_FREE) {
          isFree = true;
          selectedBaristaCustomer.loyaltyPoints = 0; // Reset stamps
          showNotification(
            "🎉 مشروب مجاني تم استرداده! تم إعادة تعيين أختام العميل"
          );
        } else {
          selectedBaristaCustomer.loyaltyPoints += 1;
          showNotification(
            "تم إضافة الطلب وتأكيد الدفع. تم إضافة ختم ولاء!"
          );
        }

        const newOrder = {
          id: generateId(),
          product: productName,
          price: price,
          date: new Date().toISOString(),
          isFree: isFree,
        };

        selectedBaristaCustomer.orders.push(newOrder);
        saveCustomers();

        productSelect.value = "";
        document
          .getElementById("custom-product-fields")
          .classList.add("hidden");
        updateBaristaCustomerDisplay();
        renderBaristaCustomersTable();

        // Update current customer display if it's the same customer
        if (
          currentCustomer &&
          currentCustomer.id === selectedBaristaCustomer.id
        ) {
          currentCustomer = selectedBaristaCustomer;
          updateCustomerDisplay();
        }
      }

      // Customer editing functions
      function editCustomer() {
        document
          .getElementById("edit-customer-form")
          .classList.remove("hidden");
        document.getElementById("edit-customer-btn").style.display = "none";
      }

      function saveCustomerChanges() {
        const newName = document
          .getElementById("edit-customer-name")
          .value.trim();
        const newPhone = document
          .getElementById("edit-customer-phone")
          .value.trim();

        if (!newName) {
          showNotification("Name cannot be empty", "error");
          return;
        }

        // Check if name already exists (excluding current customer)
        const existingCustomer = customers.find(
          (c) =>
            c.id !== selectedBaristaCustomer.id &&
            c.name.toLowerCase() === newName.toLowerCase()
        );
        if (existingCustomer) {
          showNotification("Customer name already exists", "error");
          return;
        }

        selectedBaristaCustomer.name = newName;
        selectedBaristaCustomer.phone = newPhone;

        saveCustomers();
        showNotification("Customer information updated successfully");

        cancelCustomerEdit();
        updateBaristaCustomerDisplay();
        renderBaristaCustomersTable();

        // Update current customer display if it's the same customer
        if (
          currentCustomer &&
          currentCustomer.id === selectedBaristaCustomer.id
        ) {
          currentCustomer = selectedBaristaCustomer;
          updateCustomerDisplay();
        }
      }

      function cancelCustomerEdit() {
        document.getElementById("edit-customer-form").classList.add("hidden");
        document.getElementById("edit-customer-btn").style.display =
          "inline-block";
        // Reset form values
        document.getElementById("edit-customer-name").value =
          selectedBaristaCustomer.name;
        document.getElementById("edit-customer-phone").value =
          selectedBaristaCustomer.phone || "";
      }

      function renderBaristaCustomersTable(customerList = null) {
        const tbody = document.getElementById("barista-customers-table");
        const customersToShow = customerList || customers;

        tbody.innerHTML = "";

        customersToShow.forEach((customer) => {
          const row = document.createElement("tr");
          row.className =
            "hover:bg-emerald-700/30 transition-all duration-300 border-b border-emerald-700/50";
          row.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-lg text-white font-medium">${
            customer.name
          }</td>
          <td class="px-6 py-4 whitespace-nowrap text-lg text-emerald-200">${
            customer.phone || "-"
          }</td>
          <td class="px-6 py-4 whitespace-nowrap text-lg text-emerald-200">${
            customer.orders.length
          }</td>
          <td class="px-6 py-4 whitespace-nowrap text-lg text-emerald-200">
            <div class="flex items-center gap-3">
              <span>${customer.loyaltyPoints}/${STAMPS_FOR_FREE}</span>
              ${
                customer.loyaltyPoints >= STAMPS_FOR_FREE
                  ? '<span class="text-green-400 text-xl">🎉</span>'
                  : ""
              }
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-lg font-medium">
            <button onclick="selectBaristaCustomer('${customer.id}')" 
                    class="bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white px-4 py-2 rounded-xl transition-all duration-300 shadow-lg">
              تحديد
            </button>
          </td>
        `;
          tbody.appendChild(row);
        });
      }

      // ===== Contact Form Functions =====
      function initializeContactForm() {
        // Star rating functionality
        const stars = document.querySelectorAll(".star");
        const ratingInput = document.getElementById("contact-rating");
        let currentRating = 0;

        stars.forEach((star, index) => {
          star.addEventListener("click", () => {
            currentRating = index + 1;
            ratingInput.value = currentRating;
            updateStars();
          });

          star.addEventListener("mouseover", () => {
            const hoverRating = index + 1;
            stars.forEach((s, i) => {
              s.classList.toggle("active", i < hoverRating);
            });
          });
        });

        document.querySelector(".star-rating").addEventListener("mouseleave", updateStars);

        function updateStars() {
          stars.forEach((star, index) => {
            star.classList.toggle("active", index < currentRating);
          });
        }

        // Form submission handler
        document.getElementById("contact-form").addEventListener("submit", async (e) => {
          e.preventDefault();
          
          const submitBtn = document.getElementById("contact-submit-btn");
          const originalText = submitBtn.innerHTML;

          // Validate rating
          if (!ratingInput.value) {
            showNotification("Please select a rating", "error");
            return;
          }

          // Show loading state
          submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Sending...';
          submitBtn.disabled = true;

          try {
            showNotification("Thank you for your valuable feedback!");

            // Reset form
            document.getElementById("contact-form").reset();
            ratingInput.value = "";
            currentRating = 0;
            updateStars();

          } catch (error) {
            console.error("Contact form error:", error);
            showNotification("Sorry, there was an error. Please try again later.", "error");
          } finally {
            // Restore button state
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
          }
        });
      }

      // ===== Video Background Functions =====
      function initializeVideoBackground() {
        const video = document.getElementById("hero-video");

        if (video) {
          // Set video properties for better autoplay
          video.muted = true;
          video.playsInline = true;
          video.autoplay = true;
          video.loop = true;
          video.defaultMuted = true;
          video.volume = 0;

          // Multiple attempts to play video
          const playVideo = () => {
            const playPromise = video.play();
            if (playPromise !== undefined) {
              playPromise
                .then(() => {
                  console.log("Video is playing successfully");
                  video.style.opacity = "1";
                })
                .catch((error) => {
                  console.log("Video autoplay failed:", error);
                  // Show fallback image
                  video.style.display = "none";
                });
            }
          };

          // Event listeners for video loading
          video.addEventListener("loadeddata", () => {
            console.log("Video data loaded");
            playVideo();
          });

          video.addEventListener("canplaythrough", () => {
            console.log("Video can play through");
            playVideo();
          });

          // Handle video errors and switch sources
          video.addEventListener("error", (e) => {
            console.log("Video error:", e);
            const sources = video.querySelectorAll("source");
            const currentSrc = video.currentSrc;

            // Try next source
            for (let i = 0; i < sources.length; i++) {
              if (sources[i].src === currentSrc && i < sources.length - 1) {
                video.src = sources[i + 1].src;
                video.load();
                return;
              }
            }
          });

          // Ensure continuous loop
          video.addEventListener("ended", () => {
            video.currentTime = 0;
            video.play();
          });

          // Force immediate load and play
          video.load();

          // Try playing immediately
          setTimeout(() => {
            playVideo();
          }, 500);

          // User interaction fallback
          const userInteractionHandler = () => {
            if (video.paused) {
              playVideo();
            }
            document.removeEventListener("click", userInteractionHandler);
            document.removeEventListener("touchstart", userInteractionHandler);
          };

          document.addEventListener("click", userInteractionHandler);
          document.addEventListener("touchstart", userInteractionHandler);
        }
      }

      // ===== Event Listeners Setup =====
      function setupEventListeners() {
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById("mobile-menu-btn");
        const mobileMenu = document.getElementById("mobile-menu");
        let isMenuOpen = false;

        mobileMenuBtn.addEventListener("click", () => {
          isMenuOpen = !isMenuOpen;
          const spans = mobileMenuBtn.querySelectorAll("span");

          if (isMenuOpen) {
            mobileMenu.style.maxHeight = "500px";
            spans[0].style.transform = "rotate(45deg) translate(6px, 6px)";
            spans[1].style.opacity = "0";
            spans[2].style.transform = "rotate(-45deg) translate(6px, -6px)";
          } else {
            mobileMenu.style.maxHeight = "0";
            spans.forEach((span) => {
              span.style.transform = "none";
              span.style.opacity = "1";
            });
          }
        });

        // Product modal events
        document.querySelectorAll("[data-product]").forEach((item) => {
          item.addEventListener("click", (e) => {
            const productData = JSON.parse(e.currentTarget.dataset.product);
            showProductModal(productData);
          });
        });

        document
          .getElementById("product-modal-close")
          .addEventListener("click", closeProductModal);
        document
          .getElementById("order-now-btn")
          .addEventListener("click", orderNow);

        // Shopping cart events
        document
          .getElementById("checkout-btn")
          .addEventListener("click", proceedToCheckout);
        document
          .getElementById("cart-modal-close")
          .addEventListener("click", () => {
            document.getElementById("cart-modal").classList.add("hidden");
            document.getElementById("cart-modal").classList.remove("flex");
          });

        // Checkout events
        document
          .getElementById("checkout-form")
          .addEventListener("submit", (e) => {
            e.preventDefault();
            submitOrder();
          });
        document
          .getElementById("checkout-modal-close")
          .addEventListener("click", () => {
            document.getElementById("checkout-modal").classList.add("hidden");
            document.getElementById("checkout-modal").classList.remove("flex");
          });

        // Customer login buttons
        document
          .getElementById("customer-login-btn")
          .addEventListener("click", () => {
            document
              .getElementById("customer-modal")
              .classList.remove("hidden");
            document.getElementById("customer-modal").classList.add("flex");
          });

        document
          .getElementById("mobile-customer-login-btn")
          .addEventListener("click", () => {
            document
              .getElementById("customer-modal")
              .classList.remove("hidden");
            document.getElementById("customer-modal").classList.add("flex");
            if (isMenuOpen) mobileMenuBtn.click();
          });

        document
          .getElementById("hero-loyalty-btn")
          .addEventListener("click", () => {
            document
              .getElementById("customer-modal")
              .classList.remove("hidden");
            document.getElementById("customer-modal").classList.add("flex");
          });

        // Customer login submit
        document
          .getElementById("customer-login-submit")
          .addEventListener("click", () => {
            const identifier = document
              .getElementById("customer-identifier")
              .value.trim();
            if (!identifier) {
              showNotification(
                "Please enter your name or phone number",
                "error"
              );
              return;
            }

            currentCustomer = findOrCreateCustomer(identifier);
            updateCustomerDisplay();

            document.getElementById("customer-modal").classList.add("hidden");
            document.getElementById("customer-modal").classList.remove("flex");
            document.getElementById("customer-identifier").value = "";
          });

        // Customer modal close
        document
          .getElementById("customer-modal-close")
          .addEventListener("click", () => {
            document.getElementById("customer-modal").classList.add("hidden");
            document.getElementById("customer-modal").classList.remove("flex");
          });

        // Customer dashboard
        document
          .getElementById("customer-name-display")
          .addEventListener("click", () => {
            if (currentCustomer) {
              document
                .getElementById("customer-dashboard")
                .classList.remove("hidden");
              document
                .getElementById("customer-dashboard")
                .classList.add("flex");
              updateCustomerDashboard();
            }
          });

        document
          .getElementById("mobile-customer-name-display")
          .addEventListener("click", () => {
            if (currentCustomer) {
              document
                .getElementById("customer-dashboard")
                .classList.remove("hidden");
              document
                .getElementById("customer-dashboard")
                .classList.add("flex");
              updateCustomerDashboard();
            }
          });

        document
          .getElementById("customer-dashboard-close")
          .addEventListener("click", () => {
            document
              .getElementById("customer-dashboard")
              .classList.add("hidden");
            document
              .getElementById("customer-dashboard")
              .classList.remove("flex");
          });

        // Customer logout
        document
          .getElementById("logout-customer-btn")
          .addEventListener("click", customerLogout);
        document
          .getElementById("mobile-logout-customer-btn")
          .addEventListener("click", customerLogout);

        // Barista access buttons
        document
          .getElementById("barista-access-btn")
          .addEventListener("click", () => {
            document.getElementById("barista-modal").classList.remove("hidden");
            document.getElementById("barista-modal").classList.add("flex");
          });

        document
          .getElementById("mobile-barista-access-btn")
          .addEventListener("click", () => {
            document.getElementById("barista-modal").classList.remove("hidden");
            document.getElementById("barista-modal").classList.add("flex");
            if (isMenuOpen) mobileMenuBtn.click();
          });

        // Barista login
        document
          .getElementById("barista-login-submit")
          .addEventListener("click", () => {
            const pin = document.getElementById("barista-pin").value;
            if (pin === DEFAULT_BARISTA_PIN) {
              document.getElementById("barista-modal").classList.add("hidden");
              document.getElementById("barista-modal").classList.remove("flex");
              document
                .getElementById("barista-dashboard")
                .classList.remove("hidden");
              document.getElementById("barista-pin").value = "";
              document.getElementById("barista-error").classList.add("hidden");
              renderBaristaCustomersTable();
              renderPendingOrders();
              renderShopOrders();
            } else {
              document
                .getElementById("barista-error")
                .classList.remove("hidden");
              document.getElementById("barista-pin").value = "";
            }
          });

        // Barista modal close
        document
          .getElementById("barista-modal-close")
          .addEventListener("click", () => {
            document.getElementById("barista-modal").classList.add("hidden");
            document.getElementById("barista-modal").classList.remove("flex");
            document.getElementById("barista-pin").value = "";
            document.getElementById("barista-error").classList.add("hidden");
          });

        // Barista logout
        document
          .getElementById("barista-logout-btn")
          .addEventListener("click", () => {
            document
              .getElementById("barista-dashboard")
              .classList.add("hidden");
            selectedBaristaCustomer = null;
            document
              .getElementById("barista-customer-details")
              .classList.add("hidden");
          });

        // Customer edit functionality
        document
          .getElementById("edit-customer-btn")
          .addEventListener("click", editCustomer);

        // Product select change handler
        document
          .getElementById("barista-product-select")
          .addEventListener("change", (e) => {
            const customFields = document.getElementById(
              "custom-product-fields"
            );
            if (e.target.value === "custom") {
              customFields.classList.remove("hidden");
            } else {
              customFields.classList.add("hidden");
            }
          });

        // Enter key support
        document
          .getElementById("barista-pin")
          .addEventListener("keypress", (e) => {
            if (e.key === "Enter")
              document.getElementById("barista-login-submit").click();
          });

        document
          .getElementById("customer-identifier")
          .addEventListener("keypress", (e) => {
            if (e.key === "Enter")
              document.getElementById("customer-login-submit").click();
          });

        document
          .getElementById("search-customer")
          .addEventListener("keypress", (e) => {
            if (e.key === "Enter") searchCustomer();
          });

        // Menu filter functionality
        const filterButtons = document.querySelectorAll(".filter-btn");
        const menuItems = document.querySelectorAll(".menu-item");

        filterButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const category = button.getAttribute("data-category");

            // Update active button
            filterButtons.forEach((btn) => btn.classList.remove("active"));
            button.classList.add("active");

            // Filter items with stagger animation
            menuItems.forEach((item, index) => {
              const itemCategory = item.getAttribute("data-category");
              if (category === "all" || itemCategory === category) {
                setTimeout(() => {
                  item.style.display = "block";
                  item.classList.add("fade-in-up");
                }, index * 100);
              } else {
                item.style.display = "none";
                item.classList.remove("fade-in-up");
              }
            });
          });
        });

        // Shop filter functionality
        const shopFilterButtons = document.querySelectorAll(".shop-filter-btn");
        const shopItems = document.querySelectorAll(".shop-item");

        shopFilterButtons.forEach((button) => {
          button.addEventListener("click", () => {
            const category = button.getAttribute("data-shop-category");

            // Update active button
            shopFilterButtons.forEach((btn) => btn.classList.remove("active"));
            button.classList.add("active");

            // Filter items with stagger animation
            shopItems.forEach((item, index) => {
              const itemCategory = item.getAttribute("data-shop-category");
              if (category === "all" || itemCategory === category) {
                setTimeout(() => {
                  item.style.display = "block";
                  item.classList.add("fade-in-up");
                }, index * 100);
              } else {
                item.style.display = "none";
                item.classList.remove("fade-in-up");
              }
            });
          });
        });

        // Navbar scroll effect
        const navbar = document.getElementById("navbar");
        window.addEventListener("scroll", () => {
          if (window.scrollY > 100) {
            navbar.classList.add("navbar-scrolled");
          } else {
            navbar.classList.remove("navbar-scrolled");
          }
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
          anchor.addEventListener("click", function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute("href"));
            if (target) {
              target.scrollIntoView({
                behavior: "smooth",
                block: "start",
              });

              // Close mobile menu if open
              if (isMenuOpen) {
                mobileMenuBtn.click();
              }
            }
          });
        });

        // Add scroll animations
        const observerOptions = {
          threshold: 0.1,
          rootMargin: "0px 0px -50px 0px",
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("fade-in-up");
            }
          });
        }, observerOptions);

        // Observe all menu items and sections
        document
          .querySelectorAll(".menu-item, .shop-item, .fade-in-up")
          .forEach((el) => {
            observer.observe(el);
          });
      }

      // ===== Global Functions for Barista Dashboard =====
      window.searchCustomer = searchCustomer;
      window.selectBaristaCustomer = selectBaristaCustomer;
      window.addNewCustomer = addNewCustomer;
      window.addCustomerOrder = addCustomerOrder;
      window.confirmOrder = confirmOrder;
      window.cancelOrder = cancelOrder;
      window.confirmShopOrder = confirmShopOrder;
      window.cancelShopOrder = cancelShopOrder;
      window.saveCustomerChanges = saveCustomerChanges;
      window.cancelCustomerEdit = cancelCustomerEdit;
      window.addToCart = addToCart;
      window.removeFromCart = removeFromCart;
      window.updateQuantity = updateQuantity;
      window.toggleCart = toggleCart;

      // ===== Initialization =====
      function initializeApp() {
        loadCustomers();
        loadPendingOrders();
        loadShopOrders();
        loadCustomProducts();
        loadShoppingCart();
        setupEventListeners();
        initializeContactForm();
        initializeVideoBackground();
        renderBaristaCustomersTable();

        // Add loading complete indicator
        setTimeout(() => {
          document.body.classList.add("loaded");
        }, 500);
      }

      // Start the app when DOM is loaded
      document.addEventListener("DOMContentLoaded", initializeApp);

      window.onload = function () {
        var d = document.createElement("div");
        d.id = "aionspaceLoadFinished";
        document.body.appendChild(d);
      };
    </script>
  
</body></html>